import{u as T,h as j,F as q,k as P,Q as H,a as J,b as M,d as K}from"./vendor-quasar-C1KtC9YM.js";import{_ as W}from"../app-Bsnq-uzD.js";import{f as a,C as n,H as i,D as _,Q as e,L as b,G as c,E as S,N as s,O as L,I as k,J as f}from"./vendor-D8nj3W7R.js";const Y={class:"drawer-shell"},Z={class:"drawer-header"},X={key:1,class:"drawer-content tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},ee={class:"detail-section"},te={class:"section-card"},le={class:"section-card__body"},se={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},ae={class:"detail-value"},oe={class:"detail-value"},ie={class:"detail-value"},de={class:"tw-mt-1"},re={class:"ip-category-description"},ne={class:"tw-mt-1"},ce={class:"detail-section"},ue={class:"section-card"},ve={class:"section-card__body"},_e={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},ge={class:"detail-value tw-flex tw-items-center tw-gap-2"},me=["src","alt"],we={class:"detail-label"},ye={class:"detail-value"},pe={class:"detail-section xl:tw-col-span-2"},be={class:"section-card"},ke={class:"section-card__body section-body--stack"},fe={class:"detail-value tw-break-all"},he={class:"tw-mt-2"},Ce={class:"tw-text-xs tw-uppercase tw-text-slate-500"},xe={class:"tw-text-sm tw-font-medium tw-break-all"},Ne={key:1,class:"tw-text-sm tw-text-slate-500"},Pe={class:"detail-section xl:tw-col-span-2"},Se={class:"section-card"},Le={class:"section-card__body"},De={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Ie={class:"detail-value"},Ve={class:"detail-value"},Ae={class:"tw-mt-1"},Be={class:"ip-category-description"},Ue={class:"detail-value"},Qe={class:"detail-value"},Ee={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-3 tw-mt-4"},Oe={class:"detail-label"},Fe={class:"detail-value"},Re={__name:"PageviewDetailDrawer",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(g,{emit:D}){const I={name:"Não determinado",color_hex:"#FCE7F3",description:"Categoria ainda não determinada."},r=g,V=D,m=T(),w=a({get:()=>r.modelValue,set:l=>V("update:modelValue",l)}),A=a(()=>m.screen.lt.lg?m.screen.width:Math.round(m.screen.width*.8)),u=a(()=>r.payload?.pageview??{}),h=a(()=>r.payload?.url??{full:null,origin:null,path:null,query_params:{}}),v=a(()=>r.payload?.geo??{}),d=a(()=>r.payload?.network??{}),C=a(()=>{const l=h.value?.query_params??{};return Object.entries(l)}),B=a(()=>C.value.length>0),U=a(()=>u.value?.campaign?.name??"-"),Q=a(()=>d.value?.flags??{}),y=a(()=>u.value?.ip_category??I),p=a(()=>d.value?.ip_category??null),E=a(()=>p.value?.color_hex??"#475569"),O=a(()=>p.value?.name??"-"),F=a(()=>p.value?.description??"Sem descrição."),R=a(()=>$(h.value?.full||"")),x=a(()=>{const l=v.value?.country_code;return l?`${r.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null});function $(l){if(!l)return"-";try{const t=typeof window<"u"?window.location.origin:"https://placeholder.local",o=new URL(l,t);return`${o.origin}${o.pathname}`}catch{return l.split("?")[0]??l}}function G(l){return l==null?"-":l?"Sim":"Não"}function z(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}return(l,t)=>(i(),n(K,{modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=o=>w.value=o),side:"right",overlay:"",bordered:"",width:A.value,class:"pageview-detail-drawer"},{default:_(()=>[e("div",Y,[e("div",Z,[S(j,{icon:"close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=o=>w.value=!1)})]),g.loading?(i(),n(q,{key:0,indeterminate:"",color:"primary"})):b("",!0),g.loading?b("",!0):(i(),c("div",X,[e("section",ee,[e("div",te,[t[7]||(t[7]=e("div",{class:"section-card__header"},"VISITA",-1)),e("div",le,[e("div",se,[e("div",null,[t[2]||(t[2]=e("div",{class:"detail-label"},"Data/Horário",-1)),e("div",ae,s(u.value.created_at_formatted),1)]),e("div",null,[t[3]||(t[3]=e("div",{class:"detail-label"},"Campanha",-1)),e("div",oe,s(U.value),1)]),e("div",null,[t[4]||(t[4]=e("div",{class:"detail-label"},"IP",-1)),e("div",ie,s(u.value.ip||"-"),1)]),e("div",null,[t[5]||(t[5]=e("div",{class:"detail-label"},"Categoria de IP",-1)),e("div",de,[e("div",{class:"ip-category-label",style:L({color:y.value.color_hex})},s(y.value.name),5),e("div",re,s(y.value.description||"Sem descrição."),1)])]),e("div",null,[t[6]||(t[6]=e("div",{class:"detail-label"},"Conversão",-1)),e("div",ne,[u.value.conversion?(i(),n(P,{key:0,color:"green",label:"Convertido"})):(i(),n(P,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])])])])])]),e("section",ce,[e("div",ue,[t[9]||(t[9]=e("div",{class:"section-card__header"},"GEOLOCALIZAÇÃO",-1)),e("div",ve,[e("div",_e,[e("div",null,[t[8]||(t[8]=e("div",{class:"detail-label"},"País",-1)),e("div",ge,[x.value?(i(),c("img",{key:0,src:x.value,alt:v.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,me)):b("",!0),e("span",null,s(v.value.country_name??"-"),1)])]),(i(),c(k,null,f([{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],o=>e("div",{key:o.key},[e("div",we,s(o.label),1),e("div",ye,s(v.value[o.key]??"-"),1)])),64))])])])]),e("section",pe,[e("div",be,[t[12]||(t[12]=e("div",{class:"section-card__header"},"ORIGEM DA URL",-1)),e("div",ke,[e("div",null,[t[10]||(t[10]=e("div",{class:"detail-label"},"Página (sem parâmetros)",-1)),e("div",fe,s(R.value),1)]),e("div",null,[t[11]||(t[11]=e("div",{class:"detail-label"},"Parâmetros",-1)),e("div",he,[B.value?(i(),n(H,{key:0,class:"rounded-borders"},{default:_(()=>[(i(!0),c(k,null,f(C.value,([o,N])=>(i(),n(J,{key:`${o}-${N}`},{default:_(()=>[S(M,null,{default:_(()=>[e("div",Ce,s(o),1),e("div",xe,s(z(N)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),c("div",Ne,"Sem parâmetros na URL."))])])])])]),e("section",Pe,[e("div",Se,[t[18]||(t[18]=e("div",{class:"section-card__header"},"REDE & SEGURANÇA",-1)),e("div",Le,[e("div",De,[e("div",null,[t[13]||(t[13]=e("div",{class:"detail-label"},"ISP",-1)),e("div",Ie,s(d.value.isp||"-"),1)]),e("div",null,[t[14]||(t[14]=e("div",{class:"detail-label"},"Organização",-1)),e("div",Ve,s(d.value.organization||"-"),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),e("div",Ae,[e("div",{class:"ip-category-label",style:L({color:E.value})},s(O.value),5),e("div",Be,s(F.value),1)])]),e("div",null,[t[16]||(t[16]=e("div",{class:"detail-label"},"Fraud Score",-1)),e("div",Ue,s(d.value.fraud_score??"-"),1)]),e("div",null,[t[17]||(t[17]=e("div",{class:"detail-label"},"Última verificação",-1)),e("div",Qe,s(d.value.last_checked_formatted??d.value.last_checked??"-"),1)])]),e("div",Ee,[(i(),c(k,null,f([{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],o=>e("div",{key:o.key},[e("div",Oe,s(o.label),1),e("div",Fe,s(G(Q.value[o.key])),1)])),64))])])])])]))])]),_:1},8,["modelValue","width"]))}},Te=W(Re,[["__scopeId","data-v-de1c622f"]]);export{Te as default};
