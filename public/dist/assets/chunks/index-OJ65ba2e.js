import{u as _a,H as ae,A as M,M as ve,e as r,O as pe,c as le,E as te,o as fe,F as wa,G as f,n as Me,v as B,w as z,l as ge,_ as Be,x as Q,K as oe,W as ya,y as _e}from"./vendor-quasar-Bee0Lbku.js";import{r as i,f as ze,w as Re,e as ba,G as $,H as w,E as t,u as Ee,S as xa,D as o,Q as d,N as x,C as ne,O as C,M as ie,L as Ca,j as se,I as Da,R as y}from"./vendor-BB0I-wvh.js";import Va from"./pageviewdetailmodal-CZTkNMyu.js";import{_ as Sa}from"../app-Br5Cis73.js";const ka={class:"q-mb-md tw-flex tw-flex-wrap md:tw-flex-nowrap tw-items-start tw-gap-3"},ha={class:"tw-w-full sm:tw-w-[320px] md:tw-w-[300px]"},Ua={class:"tw-w-full sm:tw-w-[320px] md:tw-w-[300px]"},Pa={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-[150px_1fr] tw-gap-3 tw-p-3"},Ta={class:"tw-flex tw-flex-col tw-gap-2"},Ma={class:"tw-flex tw-justify-end tw-gap-2 tw-px-3 tw-pb-3"},Ba={class:"tw-w-full md:tw-flex-1 tw-mt-1 md:tw-mt-2"},za={class:"tw-flex tw-flex-wrap tw-gap-3"},Ra={class:"tw-w-full md:tw-w-auto md:tw-ml-auto tw-flex tw-gap-2 md:tw-self-start"},Ea={class:"tw-flex tw-items-center tw-gap-1"},Fa={class:"tw-flex tw-items-center tw-gap-2"},Ya=["src","alt"],Na={key:0},La={class:"tw-flex tw-flex-col tw-gap-1"},Qa={class:"text-h6"},$a={key:0,class:"text-body1"},Ia={key:1,class:"text-body1"},Aa={__name:"Index",setup(Ha){const we=i([]),re=i(!1),v=_a(),m=i({page:1,rowsPerPage:20,rowsNumber:0,sortBy:"conversion_event_time",descending:!0}),h=i(null),Fe=i(null),D=i({include_manual:!0,include_automatic:!0}),p=i({from:"",to:""}),b=i({from:"",to:""}),I=i(!1),ue=i(!1),R=i([]),A=i([]),U=i([]),H=i([]),O=i(!1),de=i(!1),ce=i(null),j=i({}),E=i(!1),F=i(!1),c=i({}),G=i(!1),q=i(!1),Y=i(null),u=i({campaign_id:null,conversion_event_time:"",conversion_timezone:"",gclid:"",conversion_value:1}),N=i(!1),L=i(!1),J=i(!1),K=i(!1),ye=i([]),g=i({has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""}),n=i({campaign_id:null,date_from:"",date_to:"",include_manual:!0,include_automatic:!1}),V=i(""),S=i(""),be="https://leadnode.master.dev.br".replace(/\/$/,""),Ye=[{name:"conversion_event_time",label:"Data",field:"conversion_event_time_formatted",sortable:!0,align:"left"},{name:"type",label:"Tipo",field:"type",sortable:!1,align:"left"},{name:"campaign_name",label:"Campanha",field:"campaign_name",sortable:!0,align:"left"},{name:"campaign_code",label:"Cód/Campanha",field:"campaign_code",sortable:!0,align:"left"},{name:"conversion_name",label:"Pixel/Conversão",field:"conversion_name",sortable:!0,align:"left"},{name:"pageview_id",label:"Pageview ID",field:"pageview_id",sortable:!0,align:"left"},{name:"country_code",label:"País",field:"country_code",sortable:!0,align:"left"},{name:"region_name",label:"Região",field:"region_name",sortable:!0,align:"left"},{name:"city",label:"Cidade",field:"city",sortable:!0,align:"left"},{name:"conversion_value",label:"Valor (USD)",field:"conversion_value",sortable:!0,align:"left"},{name:"currency_code",label:"Moeda",field:"currency_code",sortable:!0,align:"left"},{name:"google_upload_status",label:"Status Google",field:"google_upload_status",sortable:!0,align:"left"},{name:"actions",label:"Ações",field:"actions",sortable:!1,align:"left"}],xe=ze(()=>!!Y.value?.is_manual),Ne=ze(()=>{const l=String(p.value?.from||""),e=String(p.value?.to||"");return!l||!e?"":`${ke(l)}  -  ${ke(e)}`});function Le(l){return l==null||l===""?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(l))}function Ce(l){const e=l?.country_code;if(!e)return null;const a=String(e).toLowerCase();return`${be}/assets/country-flags/${a}.svg`}function De(l){const e=String(l??"").trim().toLowerCase();return{0:"pending",1:"processing",2:"processing_export",3:"success",4:"exported",5:"error"}[e]??e}function Qe(l){const e=De(l);return e==="exported"||e==="success"?"positive":e==="processing_export"||e==="processing"?"warning":e==="pending"?"grey-6":e==="error"||e==="failed"?"negative":"primary"}function $e(l){const e=De(l);return e==="exported"?"Exportado":e==="processing_export"||e==="processing"?"Processando":e==="pending"?"Pendente":e==="error"||e==="failed"?"Erro":e==="success"?"Sucesso":l||"-"}function Ve(l){const e=String(l||"").trim();return e!==""&&e!=="-"&&e.length>24}function W(l){const e=String(l?.id??"");return e?!!j.value[e]:!1}function Ie(l){const e=String(l?.id??"");e&&(j.value={...j.value,[e]:!j.value[e]})}function Se(l,e){const a=l==="manual"?!!e:D.value.include_manual,s=l==="automatic"?!!e:D.value.include_automatic;D.value={include_manual:a,include_automatic:s},m.value.page=1,k({pagination:m.value})}function P(l){const e=new Date(l),a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),_=String(e.getDate()).padStart(2,"0");return`${a}-${s}-${_}`}function ke(l){if(!l||!/^\d{4}-\d{2}-\d{2}$/.test(l))return"";const[e,a,s]=l.split("-");return`${s}.${a}.${e}`}function Ae(){const l=new Date,e=new Date;return e.setDate(l.getDate()-6),{from:P(e),to:P(l)}}function He(l){const e=new Date,a=new Date(e),s=new Date(e);if(l==="last_7")a.setDate(e.getDate()-6);else if(l==="last_31")a.setDate(e.getDate()-30);else if(l==="month_current")a.setDate(1);else if(l==="month_previous"){const _=new Date(e.getFullYear(),e.getMonth()-1,1),T=new Date(e.getFullYear(),e.getMonth(),0);a.setTime(_.getTime()),s.setTime(T.getTime())}return{from:P(a),to:P(s)}}function X(l){b.value=He(l)}function Oe(){const l=P(new Date);b.value={from:l,to:l}}function je(){const l=new Date;l.setDate(l.getDate()-1);const e=P(l);b.value={from:e,to:e}}function Ge(){b.value={from:String(p.value?.from||""),to:String(p.value?.to||"")}}function qe(){I.value=!1}function Je(){const l=String(b.value?.from||""),e=String(b.value?.to||"");l&&e&&(p.value={from:l,to:e}),I.value=!1}function Ke(l){Y.value=l,G.value=!0}function he(){G.value=!1,Y.value=null}async function We(){if(!(!Y.value||q.value)){q.value=!0;try{await y.delete(route("panel.conversoes.destroy",Y.value.id)),v.notify({type:"positive",message:"Conversão excluída com sucesso."}),he(),await k({pagination:m.value})}catch(l){const e=l?.response?.data?.message||"Não foi possível excluir a conversão.";v.notify({type:"negative",message:e})}finally{q.value=!1}}}async function Xe(l){if(!l){v.notify({type:"warning",message:"Pageview não encontrada para esta conversão."});return}O.value=!0,de.value=!0,ce.value=null;try{const e=await y.get(route("panel.atividade.pageviews.show",l));ce.value=e.data}catch{O.value=!1,v.notify({type:"negative",message:"Não foi possível carregar os detalhes da pageview."})}finally{de.value=!1}}function Ze(){y.get(route("panel.conversoes.campaigns")).then(l=>{R.value=l.data,A.value=l.data})}function ea(l,e){e(()=>{const a=String(l||"").trim().toLowerCase();if(a===""){A.value=R.value;return}A.value=R.value.filter(s=>String(s?.name||"").toLowerCase().includes(a))})}function aa(){y.get(route("panel.conversoes.timezones")).then(l=>{U.value=l.data,H.value=l.data})}function la(){const l=new Date,e=l.getTimezoneOffset();return new Date(l.getTime()-e*60*1e3).toISOString().slice(0,16)}function Ue(l=null){const e=R.value.find(a=>Number(a.id)===Number(l));return e?.timezone_identifier?e.timezone_identifier:U.value.length>0?U.value.find(s=>s.identifier==="America/Sao_Paulo")?.identifier||U.value[0].identifier:"UTC"}function ta(){c.value={},u.value={campaign_id:h.value??null,conversion_event_time:la(),conversion_timezone:Ue(h.value),gclid:"",conversion_value:1},E.value=!0}function oa(l){u.value.conversion_timezone=Ue(l)}function na(l,e){e(()=>{const a=String(l||"").trim().toLowerCase();if(a===""){H.value=U.value;return}H.value=U.value.filter(s=>{const _=String(s.label||"").toLowerCase(),T=String(s.identifier||"").toLowerCase();return _.includes(a)||T.includes(a)})})}function Z(l){return String(l||"").replace("T"," ")}function Pe(l){return String(l||"").replace(" ","T")}function me(){n.value={campaign_id:null,date_from:"",date_to:"",include_manual:!0,include_automatic:!1},V.value="",S.value="",g.value={has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""}}function ia(){E.value=!1,c.value={}}async function sa(){if(!F.value){if(F.value=!0,c.value={},!String(u.value.gclid||"").trim()){c.value={...c.value,gclid:["Informe o GCLID."]},F.value=!1;return}try{await y.post(route("panel.conversoes.store-manual"),{campaign_id:u.value.campaign_id,conversion_event_time:u.value.conversion_event_time,conversion_timezone:u.value.conversion_timezone,gclid:u.value.gclid,conversion_value:u.value.conversion_value||1}),E.value=!1,v.notify({type:"positive",message:"Conversão manual cadastrada com sucesso."}),await k({pagination:m.value})}catch(l){if(l.response?.status===422){c.value=l.response.data.errors||{};return}v.notify({type:"negative",message:"Não foi possível cadastrar a conversão manual."})}finally{F.value=!1}}}async function ra(){me(),N.value=!0,J.value=!0;try{const{data:l}=await y.get(route("panel.conversoes.campaigns"));ye.value=l}catch{N.value=!1,v.notify({type:"negative",message:"Não foi possível carregar as campanhas para exportação."})}finally{J.value=!1}}async function ua(l){if(n.value.campaign_id=l,n.value.date_from="",n.value.date_to="",g.value={has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""},!!l){L.value=!0;try{const{data:e}=await y.get(route("panel.conversoes.export-range"),{params:{campaign_id:l}});g.value=e,n.value.date_from=Z(e.min_datetime_local||""),n.value.date_to=Z(e.max_datetime_local||"")}catch{v.notify({type:"negative",message:"Não foi possível carregar as datas para exportação."})}finally{L.value=!1}}}function da(){V.value=n.value.date_from||Z(g.value.min_datetime_local||"")}function ca(){n.value.date_from=V.value||n.value.date_from}function ma(){S.value=n.value.date_to||Z(g.value.max_datetime_local||"")}function va(){n.value.date_to=S.value||n.value.date_to}function Te(){N.value=!1,me()}function pa(l){return l&&/filename=\"?([^\";]+)\"?/i.exec(l)?.[1]||null}async function fa(l){if(!(l?.response?.headers?.["content-type"]||"").includes("application/json"))return null;try{const a=await l.response.data.text();return JSON.parse(a)?.message||null}catch{return null}}async function ga(){if(!K.value){if(!n.value.campaign_id){v.notify({type:"warning",message:"Selecione uma campanha para exportar."});return}if(!n.value.include_manual&&!n.value.include_automatic){v.notify({type:"warning",message:"Selecione pelo menos um tipo de conversão para exportar."});return}K.value=!0;try{const l=await y.get(route("panel.conversoes.export-csv"),{params:{campaign_id:n.value.campaign_id,date_from:Pe(n.value.date_from),date_to:Pe(n.value.date_to),include_manual:n.value.include_manual,include_automatic:n.value.include_automatic},responseType:"blob"}),e=new Blob([l.data],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=window.URL.createObjectURL(e);a.href=s,a.download=pa(l.headers["content-disposition"])||"google_ads_conversions.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),v.notify({type:"positive",message:"CSV gerado com sucesso."}),Te()}catch(l){const e=await fa(l);v.notify({type:"negative",message:e||"Não foi possível gerar o CSV."})}finally{K.value=!1}}}function k(l=null){re.value=!0;const e=l?.pagination??m.value,{page:a,rowsPerPage:s,sortBy:_,descending:T}=e;y.get(route("panel.conversoes.data"),{params:{page:a,per_page:s,sortBy:_,descending:T,campaign_id:h.value,date_from:p.value?.from||void 0,date_to:p.value?.to||void 0,include_manual:D.value.include_manual,include_automatic:D.value.include_automatic}}).then(ee=>{we.value=ee.data.data,m.value={...m.value,page:ee.data.current_page,rowsPerPage:ee.data.per_page,rowsNumber:ee.data.total,sortBy:_,descending:T}}).finally(()=>{re.value=!1})}return Re(h,()=>{ue.value&&(m.value.page=1,k({pagination:m.value}))}),Re(()=>[p.value?.from,p.value?.to],()=>{ue.value&&(m.value.page=1,k({pagination:m.value}))}),ba(()=>{p.value=Ae(),ue.value=!0,Ze(),aa(),k({pagination:m.value})}),(l,e)=>(w(),$(Da,null,[t(Ee(xa),{title:"Conversões"}),t(B,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:o(()=>[d("div",ka,[d("div",ha,[t(ae,{ref_key:"tableRef",ref:Fe,modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),options:A.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":"","input-debounce":"0",clearable:"",dense:"",outlined:"","hide-bottom-space":"",class:"filter-field campaign-filter-field",label:"Filtrar por campanha",onFilter:ea},null,8,["modelValue","options"])]),d("div",Ua,[t(M,{dense:"",outlined:"",readonly:"",class:"filter-field",label:"Período","model-value":Ne.value,placeholder:"Selecione um intervalo"},{prepend:o(()=>[t(le,{name:"event"})]),append:o(()=>[t(le,{name:"expand_more"})]),default:o(()=>[t(ve,{modelValue:I.value,"onUpdate:modelValue":e[6]||(e[6]=a=>I.value=a),anchor:"bottom left",self:"top left",offset:[0,6],"transition-show":"scale","transition-hide":"scale",onBeforeShow:Ge},{default:o(()=>[d("div",Pa,[d("div",Ta,[t(r,{flat:"","no-caps":"",dense:"",label:"Hoje",onClick:Oe}),t(r,{flat:"","no-caps":"",dense:"",label:"Ontem",onClick:je}),t(r,{flat:"","no-caps":"",dense:"",label:"Últimos 7 dias",onClick:e[1]||(e[1]=a=>X("last_7"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Últimos 31 dias",onClick:e[2]||(e[2]=a=>X("last_31"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Mês atual",onClick:e[3]||(e[3]=a=>X("month_current"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Mês anterior",onClick:e[4]||(e[4]=a=>X("month_previous"))})]),t(pe,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=a=>b.value=a),range:"",mask:"YYYY-MM-DD",minimal:"",class:"period-date-picker"},null,8,["modelValue"])]),d("div",Ma,[t(r,{flat:"","no-caps":"",label:"Cancelar",onClick:qe}),t(r,{color:"primary","no-caps":"",label:"Aplicar",onClick:Je})])]),_:1},8,["modelValue"])]),_:1},8,["model-value"])]),d("div",Ba,[d("div",za,[t(te,{"model-value":D.value.include_manual,label:"Manual","onUpdate:modelValue":e[7]||(e[7]=a=>Se("manual",a))},null,8,["model-value"]),t(te,{"model-value":D.value.include_automatic,label:"Automática","onUpdate:modelValue":e[8]||(e[8]=a=>Se("automatic",a))},null,8,["model-value"])])]),d("div",Ra,[t(r,{color:"primary",unelevated:"",icon:"download",label:"Exportar",loading:J.value,onClick:ra},{default:o(()=>[t(fe,{anchor:"top middle",self:"bottom middle"},{default:o(()=>[...e[28]||(e[28]=[x(" Exportar conversões por campanha e período. ",-1)])]),_:1})]),_:1},8,["loading"]),t(r,{color:"positive",unelevated:"",icon:"add",label:"Conversão",onClick:ta},{default:o(()=>[t(fe,{anchor:"top middle",self:"bottom middle"},{default:o(()=>[...e[29]||(e[29]=[x(" Adicionar uma nova conversão manual. ",-1)])]),_:1})]),_:1})])]),t(wa,{rows:we.value,columns:Ye,"row-key":"id",loading:re.value,pagination:m.value,"onUpdate:pagination":e[9]||(e[9]=a=>m.value=a),"binary-state-sort":!0,"rows-per-page-options":[5,10,15,20,25,50],onRequest:k},{"body-cell-conversion_event_time":o(a=>[t(f,{props:a},{default:o(()=>[x(C(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-type":o(a=>[t(f,{props:a},{default:o(()=>[t(Me,{color:a.row.is_manual?"info":"positive",label:a.row.is_manual?"Manual":"Automática"},null,8,["color","label"])]),_:2},1032,["props"])]),"body-cell-campaign_name":o(a=>[t(f,{props:a},{default:o(()=>[d("div",Ea,[d("div",{class:Ca(["campaign-name-truncate",{"campaign-name-truncate--fade":Ve(a.value)&&!W(a.row),"campaign-name-truncate--expanded":W(a.row)}])},C(a.value||"-"),3),Ve(a.value)?(w(),ne(r,{key:0,dense:"",flat:"",round:"",size:"sm",icon:W(a.row)?"visibility_off":"visibility",color:"grey-6",class:"campaign-name-eye-btn",onClick:s=>Ie(a.row)},{default:o(()=>[t(fe,null,{default:o(()=>[x(C(W(a.row)?"Recolher nome":"Ver nome completo"),1)]),_:2},1024)]),_:2},1032,["icon","onClick"])):ie("",!0)])]),_:2},1032,["props"])]),"body-cell-conversion_value":o(a=>[t(f,{props:a},{default:o(()=>[x(C(Le(a.value)),1)]),_:2},1032,["props"])]),"body-cell-pageview_id":o(a=>[t(f,{props:a},{default:o(()=>[a.value?(w(),ne(r,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"manage_search",color:"primary",onClick:s=>Xe(a.value)},null,8,["onClick"])):ie("",!0)]),_:2},1032,["props"])]),"body-cell-country_code":o(a=>[t(f,{props:a},{default:o(()=>[d("div",Fa,[Ce(a.row)?(w(),$("img",{key:0,src:Ce(a.row),alt:a.value,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,Ya)):ie("",!0),d("span",null,C(a.value?a.value.toUpperCase():"-"),1)])]),_:2},1032,["props"])]),"body-cell-region_name":o(a=>[t(f,{props:a},{default:o(()=>[x(C(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-city":o(a=>[t(f,{props:a},{default:o(()=>[x(C(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-google_upload_status":o(a=>[t(f,{props:a},{default:o(()=>[a.row.is_manual?(w(),$("span",Na,"-")):(w(),ne(Me,{key:1,color:Qe(a.row.google_upload_status_slug??a.value),label:a.row.google_upload_status_label??$e(a.row.google_upload_status_slug??a.value)},null,8,["color","label"]))]),_:2},1032,["props"])]),"body-cell-actions":o(a=>[t(f,{props:a},{default:o(()=>[t(r,{dense:"",flat:"",round:"",size:"sm",icon:"delete",class:"qtable-delete-btn",onClick:s=>Ke(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","pagination"])]),_:1}),t(_e,{modelValue:N.value,"onUpdate:modelValue":e[19]||(e[19]=a=>N.value=a),persistent:"",onHide:me},{default:o(()=>[t(B,{class:"tw-w-full tw-max-w-lg"},{default:o(()=>[t(z,null,{default:o(()=>[...e[30]||(e[30]=[d("div",{class:"text-h6"},"Exportar CSV (Google)",-1)])]),_:1}),t(ge),t(z,{class:"tw-space-y-3"},{default:o(()=>[t(ae,{modelValue:n.value.campaign_id,"onUpdate:modelValue":[e[10]||(e[10]=a=>n.value.campaign_id=a),ua],options:ye.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Campanha",outlined:"",dense:"",loading:J.value},null,8,["modelValue","options","loading"]),t(M,{modelValue:n.value.date_from,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.date_from=a),label:"Data inicial",outlined:"",dense:"",readonly:"",disable:!n.value.campaign_id||!g.value.has_rows||L.value},{append:o(()=>[t(le,{name:"event",class:"cursor-pointer"},{default:o(()=>[t(ve,{cover:"","transition-show":"scale","transition-hide":"scale",onBeforeShow:da},{default:o(()=>[t(B,null,{default:o(()=>[t(pe,{modelValue:V.value,"onUpdate:modelValue":e[11]||(e[11]=a=>V.value=a),mask:"YYYY-MM-DD HH:mm"},null,8,["modelValue"]),t(Be,{modelValue:V.value,"onUpdate:modelValue":e[12]||(e[12]=a=>V.value=a),mask:"YYYY-MM-DD HH:mm",format24h:""},null,8,["modelValue"]),t(Q,{align:"right"},{default:o(()=>[se(t(r,{flat:"",label:"Cancelar"},null,512),[[oe]]),se(t(r,{flat:"",label:"Aplicar",color:"primary",onClick:ca},null,512),[[oe]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disable"]),t(M,{modelValue:n.value.date_to,"onUpdate:modelValue":e[16]||(e[16]=a=>n.value.date_to=a),label:"Data final",outlined:"",dense:"",readonly:"",disable:!n.value.campaign_id||!g.value.has_rows||L.value},{append:o(()=>[t(le,{name:"event",class:"cursor-pointer"},{default:o(()=>[t(ve,{cover:"","transition-show":"scale","transition-hide":"scale",onBeforeShow:ma},{default:o(()=>[t(B,null,{default:o(()=>[t(pe,{modelValue:S.value,"onUpdate:modelValue":e[14]||(e[14]=a=>S.value=a),mask:"YYYY-MM-DD HH:mm"},null,8,["modelValue"]),t(Be,{modelValue:S.value,"onUpdate:modelValue":e[15]||(e[15]=a=>S.value=a),mask:"YYYY-MM-DD HH:mm",format24h:""},null,8,["modelValue"]),t(Q,{align:"right"},{default:o(()=>[se(t(r,{flat:"",label:"Cancelar"},null,512),[[oe]]),se(t(r,{flat:"",label:"Aplicar",color:"primary",onClick:va},null,512),[[oe]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disable"]),d("div",La,[t(te,{modelValue:n.value.include_manual,"onUpdate:modelValue":e[17]||(e[17]=a=>n.value.include_manual=a),label:"Conversão manual"},null,8,["modelValue"]),t(te,{modelValue:n.value.include_automatic,"onUpdate:modelValue":e[18]||(e[18]=a=>n.value.include_automatic=a),label:"Conversão automática"},null,8,["modelValue"])]),n.value.campaign_id&&!g.value.has_rows&&!L.value?(w(),ne(ya,{key:0,dense:"",rounded:"",class:"bg-orange-1 text-warning"},{default:o(()=>[...e[31]||(e[31]=[x(" Não existem conversões com identificadores de clique para exportar nesta campanha. ",-1)])]),_:1})):ie("",!0)]),_:1}),t(Q,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Fechar",onClick:Te}),t(r,{color:"primary",unelevated:"",label:"Gerar CSV",disable:!n.value.campaign_id||!g.value.has_rows||!n.value.date_from||!n.value.date_to||!n.value.include_manual&&!n.value.include_automatic,loading:K.value,onClick:ga},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(_e,{modelValue:E.value,"onUpdate:modelValue":e[25]||(e[25]=a=>E.value=a),persistent:""},{default:o(()=>[t(B,{class:"tw-w-full tw-max-w-xl"},{default:o(()=>[t(z,null,{default:o(()=>[...e[32]||(e[32]=[d("div",{class:"text-h6"},"Cadastrar conversão manual",-1)])]),_:1}),t(ge),t(z,{class:"tw-space-y-3"},{default:o(()=>[t(ae,{modelValue:u.value.campaign_id,"onUpdate:modelValue":[e[20]||(e[20]=a=>u.value.campaign_id=a),oa],options:R.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Campanha",outlined:"",dense:"",error:!!c.value.campaign_id,"error-message":c.value.campaign_id?.[0]},null,8,["modelValue","options","error","error-message"]),t(M,{modelValue:u.value.conversion_event_time,"onUpdate:modelValue":e[21]||(e[21]=a=>u.value.conversion_event_time=a),type:"datetime-local",label:"Data/hora da conversão",outlined:"",dense:"",error:!!c.value.conversion_event_time,"error-message":c.value.conversion_event_time?.[0]},null,8,["modelValue","error","error-message"]),t(M,{modelValue:u.value.conversion_value,"onUpdate:modelValue":e[22]||(e[22]=a=>u.value.conversion_value=a),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",label:"Valor (USD)",outlined:"",dense:"",error:!!c.value.conversion_value,"error-message":c.value.conversion_value?.[0],hint:"Padrão: 1. Se não alterar, será salvo como 1."},null,8,["modelValue","error","error-message"]),t(ae,{modelValue:u.value.conversion_timezone,"onUpdate:modelValue":e[23]||(e[23]=a=>u.value.conversion_timezone=a),options:H.value,"option-label":"label","option-value":"identifier","emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":"","input-debounce":"0",onFilter:na,label:"Timezone do evento",outlined:"",dense:"",error:!!c.value.conversion_timezone,"error-message":c.value.conversion_timezone?.[0]},null,8,["modelValue","options","error","error-message"]),t(M,{modelValue:u.value.gclid,"onUpdate:modelValue":e[24]||(e[24]=a=>u.value.gclid=a),modelModifiers:{trim:!0},label:"GCLID",outlined:"",dense:"",rules:[a=>!!String(a||"").trim()||"Informe o GCLID"],error:!!c.value.gclid,"error-message":c.value.gclid?.[0],hint:"Obrigatório."},null,8,["modelValue","rules","error","error-message"])]),_:1}),t(Q,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Cancelar",onClick:ia}),t(r,{color:"primary",unelevated:"",label:"Salvar",loading:F.value,onClick:sa},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(_e,{modelValue:G.value,"onUpdate:modelValue":e[26]||(e[26]=a=>G.value=a),persistent:""},{default:o(()=>[t(B,{class:"tw-w-full tw-max-w-xl"},{default:o(()=>[t(z,null,{default:o(()=>[d("div",Qa,C(xe.value?"Excluir conversão manual?":"Excluir conversão automática?"),1)]),_:1}),t(ge),t(z,{class:"tw-space-y-3"},{default:o(()=>[xe.value?(w(),$("div",$a," Esta conversão foi criada manualmente. Deseja realmente removê-la? Esta ação não poderá ser desfeita. ")):(w(),$("div",Ia," Esta conversão foi gerada automaticamente com base em dados de rastreamento. A exclusão não é recomendada, pois pode impactar relatórios históricos, análises de desempenho e reconciliação com plataformas externas. Esta ação não poderá ser desfeita. "))]),_:1}),t(Q,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Cancelar",onClick:he}),t(r,{color:"negative",unelevated:"",label:"Excluir conversão",loading:q.value,onClick:We},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Va,{modelValue:O.value,"onUpdate:modelValue":e[27]||(e[27]=a=>O.value=a),loading:de.value,payload:ce.value,"asset-base-url":Ee(be)},null,8,["modelValue","loading","payload","asset-base-url"])],64))}},Ja=Sa(Aa,[["__scopeId","data-v-e752d93e"]]);export{Ja as default};
