import{u as ve,r as me,s as G,h as y,C as fe,n as k,k as F,v as _e}from"./vendor-quasar-D0sfcEux.js";import{_ as ge}from"../app-CcaLhAzc.js";import{f as o,A as c,F as n,B as d,C as v,J as f,O as t,L as i,K as C,E as _,G as z,H as D,M as pe}from"./vendor-D6jaF0sv.js";const ye={class:"detail-section first-row-section"},we={class:"section-card"},be={class:"section-card__body"},ke={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Ce={class:"detail-value"},he={class:"detail-value"},Se={class:"value-with-copy value-with-copy--inline"},Ne={class:"detail-value"},Re={class:"value-with-copy value-with-copy--inline"},Le={class:"truncated-preview"},Ve={class:"tw-mt-1"},$e={class:"detail-value"},xe={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Pe={class:"detail-value tw-flex tw-items-center tw-gap-2"},ze=["src","alt"],De={class:"detail-label"},Ie={class:"detail-value"},Oe={class:"detail-section first-row-section"},Te={class:"section-card"},Ee={class:"section-card__body"},Ue={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Be={class:"detail-value"},Ae={class:"detail-value"},Ge={class:"detail-value"},Fe={class:"detail-value"},Me={class:"detail-value"},Qe={class:"detail-value"},qe={class:"detail-value"},We={class:"detail-value"},je={class:"detail-value"},He={class:"detail-value"},Je={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-4"},Ke={class:"detail-value"},Ze={class:"detail-value"},Xe={class:"tw-mt-1"},Ye={class:"ip-category-description"},et={class:"detail-value"},tt={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3 tw-mt-4"},lt={class:"detail-label"},st={class:"detail-value"},it={class:"detail-section xl:tw-col-span-2"},at={class:"section-card"},ot={class:"section-card__body section-body--compact"},nt={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3"},rt={class:"detail-value"},dt={class:"detail-value"},ut={class:"detail-value"},ct={class:"value-with-copy"},vt={class:"detail-value tw-break-all"},mt={class:"lg:tw-col-span-2"},ft={class:"value-with-copy"},_t={class:"detail-value tw-break-all"},gt={class:"lg:tw-col-span-2"},pt={class:"detail-value tw-break-all"},yt={class:"lg:tw-col-span-4"},wt={key:0,class:"url-params-inline"},bt={class:"url-param-key"},kt={class:"value-with-copy value-with-copy--inline"},Ct={class:"truncated-preview"},ht={key:1,class:"traffic-empty"},M=20,St={__name:"PageviewDetailModal",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(N,{emit:Q}){const q=[{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],W=[{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],g=N,j=Q,I=ve(),R=o({get:()=>g.modelValue,set:l=>j("update:modelValue",l)}),a=o(()=>g.payload?.pageview??{}),L=o(()=>g.payload?.url??{full:null,origin:null,path:null,query_params:{}}),h=o(()=>g.payload?.geo??{}),w=o(()=>g.payload?.network??{}),H=o(()=>a.value?.campaign?.name??"-"),J=o(()=>w.value?.flags??{}),V=o(()=>w.value?.ip_category??null),K=o(()=>V.value?.color_hex??"#475569"),Z=o(()=>V.value?.name??"-"),X=o(()=>V.value?.description??"Sem descrição."),Y=o(()=>a.value?.traffic_source_category??null),O=o(()=>Y.value?.name??"Não classificado"),ee=o(()=>ce(a.value?.traffic_source_reason)),T=o(()=>{const l=h.value?.country_code;return l?`${g.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null}),te=o(()=>U(L.value?.full||"")),$=o(()=>a.value?.landing_url??null),le=o(()=>U($.value||"")),S=o(()=>a.value?.referrer??null),se=o(()=>re(S.value)),x=o(()=>ue()),E=o(()=>{const l=L.value?.query_params??{};return Object.entries(l)}),ie=o(()=>E.value.length>0),ae=o(()=>{const l=a.value?.device_category?.name,e=a.value?.device_type,s=m(e);return s!=="-"?s:m(l)}),oe=o(()=>{const l=a.value?.browser?.name,e=a.value?.browser_name,s=a.value?.browser_version,r=m(e),P=m(s),A=m(l);return r!=="-"&&P!=="-"?`${r} ${P}`:r!=="-"?r:A!=="-"?A:"-"}),ne=o(()=>{const l=a.value?.os_name,e=a.value?.os_version,s=m(l),r=m(e);return s!=="-"&&r!=="-"?`${s} ${r}`:s!=="-"?s:"-"});function U(l){if(!l)return"-";try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local",s=new URL(l,e);return`${s.origin}${s.pathname}`}catch{return l.split("?")[0]??l}}function re(l){if(!l)return null;try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local";return new URL(l,e).host||null}catch{return null}}function p(l){return l!=null&&String(l).trim()!==""}function m(l){const e=String(l??"").trim();if(!e)return"-";const s=e.toLowerCase();return s==="-"||s==="unknown"||s==="desconhecido"||s==="unk"?"-":e}function de(l){return l==null?"-":l?"Sim":"Não"}function u(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}function B(l){const e=u(l);return!p(e)||e==="-"?"-":e.length<=M?e:e.slice(0,M)}function ue(){const l=a.value?.gclid;if(p(l))return String(l);const e=L.value?.query_params??{},s=Object.entries(e).find(([r])=>String(r).toLowerCase()==="gclid");return s?u(s[1]):""}function ce(l){const e=String(l||"").trim();return e?e.startsWith("click_id:")?`Clique identificado por ${e.slice(9)}`:e.startsWith("utm_medium:")?`Classificado por utm_medium=${e.slice(11)}`:e.startsWith("referrer_search:")?`Referência de buscador (${e.slice(16)})`:e.startsWith("referrer_social:")?`Referência de rede social (${e.slice(16)})`:e.startsWith("referrer:")?`Referência externa (${e.slice(9)})`:e==="internal_referrer"?"Navegação interna no mesmo domínio":e.startsWith("utm_source_only:")?`Somente utm_source informado (${e.slice(16)})`:e==="no_referrer_no_utm_no_click_id"?"Sem referrer, UTM ou click-id (direto)":e:"-"}async function b(l){const e=u(l);try{await navigator.clipboard.writeText(e),I.notify({type:"positive",message:"Valor copiado."})}catch{I.notify({type:"negative",message:"Nao foi possivel copiar."})}}return(l,e)=>(n(),c(_e,{modelValue:R.value,"onUpdate:modelValue":e[5]||(e[5]=s=>R.value=s),"transition-show":"scale","transition-hide":"scale"},{default:d(()=>[v(me,{class:"pageview-detail-card"},{default:d(()=>[v(G,{class:"tw-flex tw-justify-end"},{default:d(()=>[v(y,{icon:"close",flat:"",round:"",dense:"",onClick:e[0]||(e[0]=s=>R.value=!1)})]),_:1}),N.loading?(n(),c(fe,{key:0,indeterminate:"",color:"primary"})):f("",!0),N.loading?f("",!0):(n(),c(G,{key:1,class:"tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},{default:d(()=>[t("section",ye,[t("div",we,[e[17]||(e[17]=t("div",{class:"section-card__header"},"VISITA",-1)),t("div",be,[t("div",ke,[t("div",null,[e[6]||(e[6]=t("div",{class:"detail-label"},"Data/Horário",-1)),t("div",Ce,i(a.value.created_at_formatted),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"detail-label"},"Campanha",-1)),t("div",he,i(H.value),1)]),t("div",null,[e[9]||(e[9]=t("div",{class:"detail-label"},"IP",-1)),t("div",Se,[t("div",Ne,i(a.value.ip||"-"),1),p(a.value.ip)?(n(),c(y,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[1]||(e[1]=s=>b(a.value.ip))},{default:d(()=>[v(k,null,{default:d(()=>[...e[8]||(e[8]=[C("Copiar IP",-1)])]),_:1})]),_:1})):f("",!0)])]),t("div",null,[e[11]||(e[11]=t("div",{class:"detail-label"},"GCLID",-1)),t("div",Re,[t("div",Le,i(B(x.value)),1),p(x.value)?(n(),c(y,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[2]||(e[2]=s=>b(x.value))},{default:d(()=>[v(k,null,{default:d(()=>[...e[10]||(e[10]=[C("Copiar GCLID",-1)])]),_:1})]),_:1})):f("",!0)])]),t("div",null,[e[12]||(e[12]=t("div",{class:"detail-label"},"Conversão",-1)),t("div",Ve,[a.value.conversion?(n(),c(F,{key:0,color:"green",label:"Convertido"})):(n(),c(F,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])]),t("div",null,[e[13]||(e[13]=t("div",{class:"detail-label"},"Canal",-1)),t("div",$e,i(O.value),1)])]),e[15]||(e[15]=t("div",{class:"subsection-separator"},null,-1)),e[16]||(e[16]=t("div",{class:"subsection-title"},"GEOLOCALIZAÇÃO",-1)),t("div",xe,[t("div",null,[e[14]||(e[14]=t("div",{class:"detail-label"},"País",-1)),t("div",Pe,[T.value?(n(),_("img",{key:0,src:T.value,alt:h.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,ze)):f("",!0),t("span",null,i(h.value.country_name??"-"),1)])]),(n(),_(z,null,D(q,s=>t("div",{key:s.key},[t("div",De,i(s.label),1),t("div",Ie,i(h.value[s.key]??"-"),1)])),64))])])])]),t("section",Oe,[t("div",Te,[e[34]||(e[34]=t("div",{class:"section-card__header"},"DISPOSITIVO, NAVEGADOR & REDE",-1)),t("div",Ee,[t("div",Ue,[t("div",null,[e[18]||(e[18]=t("div",{class:"detail-label"},"Categoria",-1)),t("div",Be,i(ae.value),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"detail-label"},"Marca",-1)),t("div",Ae,i(u(a.value.device_brand)),1)]),t("div",null,[e[20]||(e[20]=t("div",{class:"detail-label"},"Modelo",-1)),t("div",Ge,i(u(a.value.device_model)),1)]),t("div",null,[e[21]||(e[21]=t("div",{class:"detail-label"},"Sistema Operacional",-1)),t("div",Fe,i(ne.value),1)]),t("div",null,[e[22]||(e[22]=t("div",{class:"detail-label"},"Navegador",-1)),t("div",Me,i(oe.value),1)]),t("div",null,[e[23]||(e[23]=t("div",{class:"detail-label"},"Idioma",-1)),t("div",Qe,i(u(a.value.language)),1)]),t("div",null,[e[24]||(e[24]=t("div",{class:"detail-label"},"Plataforma",-1)),t("div",qe,i(u(a.value.platform)),1)]),t("div",null,[e[25]||(e[25]=t("div",{class:"detail-label"},"Tela",-1)),t("div",We,i(u(a.value.screen_width))+" x "+i(u(a.value.screen_height)),1)]),t("div",null,[e[26]||(e[26]=t("div",{class:"detail-label"},"Viewport",-1)),t("div",je,i(u(a.value.viewport_width))+" x "+i(u(a.value.viewport_height)),1)]),t("div",null,[e[27]||(e[27]=t("div",{class:"detail-label"},"DPR",-1)),t("div",He,i(u(a.value.device_pixel_ratio)),1)])]),e[32]||(e[32]=t("div",{class:"subsection-separator"},null,-1)),e[33]||(e[33]=t("div",{class:"subsection-title"},"INFORMAÇÕES DA REDE",-1)),t("div",Je,[t("div",null,[e[28]||(e[28]=t("div",{class:"detail-label"},"ISP",-1)),t("div",Ke,i(w.value.isp||"-"),1)]),t("div",null,[e[29]||(e[29]=t("div",{class:"detail-label"},"Organização",-1)),t("div",Ze,i(w.value.organization||"-"),1)]),t("div",null,[e[30]||(e[30]=t("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),t("div",Xe,[t("div",{class:"ip-category-label",style:pe({color:K.value})},i(Z.value),5),t("div",Ye,i(X.value),1)])]),t("div",null,[e[31]||(e[31]=t("div",{class:"detail-label"},"Fraud Score",-1)),t("div",et,i(w.value.fraud_score??"-"),1)])]),t("div",tt,[(n(),_(z,null,D(W,s=>t("div",{key:s.key},[t("div",lt,i(s.label),1),t("div",st,i(de(J.value[s.key])),1)])),64))])])])]),t("section",it,[t("div",at,[e[44]||(e[44]=t("div",{class:"section-card__header"},"ORIGEM DO TRÁFEGO",-1)),t("div",ot,[t("div",nt,[t("div",null,[e[35]||(e[35]=t("div",{class:"detail-label"},"Canal",-1)),t("div",rt,i(O.value),1)]),t("div",null,[e[36]||(e[36]=t("div",{class:"detail-label"},"Motivo da classificação",-1)),t("div",dt,i(ee.value),1)]),t("div",null,[e[37]||(e[37]=t("div",{class:"detail-label"},"Domínio de referrer",-1)),t("div",ut,i(se.value||"-"),1)]),t("div",null,[e[39]||(e[39]=t("div",{class:"detail-label"},"Referrer completo",-1)),t("div",ct,[t("div",vt,i(S.value||"-"),1),p(S.value)?(n(),c(y,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[3]||(e[3]=s=>b(S.value))},{default:d(()=>[v(k,null,{default:d(()=>[...e[38]||(e[38]=[C("Copiar referrer",-1)])]),_:1})]),_:1})):f("",!0)])]),t("div",mt,[e[41]||(e[41]=t("div",{class:"detail-label"},"Landing page (sem parâmetros)",-1)),t("div",ft,[t("div",_t,i(le.value),1),p($.value)?(n(),c(y,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[4]||(e[4]=s=>b($.value))},{default:d(()=>[v(k,null,{default:d(()=>[...e[40]||(e[40]=[C("Copiar landing URL",-1)])]),_:1})]),_:1})):f("",!0)])]),t("div",gt,[e[42]||(e[42]=t("div",{class:"detail-label"},"Página atual (sem parâmetros)",-1)),t("div",pt,i(te.value),1)]),t("div",yt,[e[43]||(e[43]=t("div",{class:"detail-label"},"Parâmetros da URL",-1)),ie.value?(n(),_("div",wt,[(n(!0),_(z,null,D(E.value,([s,r])=>(n(),_("div",{key:`query-${s}-${r}`,class:"url-param-chip"},[t("div",bt,i(s),1),t("div",kt,[t("div",Ct,i(B(r)),1),v(y,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:P=>b(r)},{default:d(()=>[v(k,null,{default:d(()=>[C("Copiar "+i(s),1)]),_:2},1024)]),_:2},1032,["onClick"])])]))),128))])):(n(),_("div",ht,"-"))])])])])])]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}},Vt=ge(St,[["__scopeId","data-v-0280441f"]]);export{Vt as default};
