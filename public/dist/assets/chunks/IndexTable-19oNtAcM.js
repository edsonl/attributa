import{u as E,h as S,x as N,c as V,A as I,r as K}from"./vendor-quasar-C1KtC9YM.js";import{B as $,f as p,r as v,w as j,G as x,H as m,E as r,Q as f,u as t,P as L,D as g,L as C,R as T,I as D,C as A,a0 as U,K as z,a1 as F,J as W,F as _,a2 as G,a3 as H,S as q}from"./vendor-D8nj3W7R.js";import{q as o}from"./qtable-pt-CkdICETI.js";const J={class:"tw-space-y-3"},M={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-3 tw-mb-3"},X={class:"tw-flex tw-items-center tw-gap-2"},le={__name:"IndexTable",props:{title:{type:String,required:!0},collectionKey:{type:String,required:!0},enableSelection:{type:Boolean,default:!0},columns:{type:Array,required:!0},rowsPerPageOptions:{type:Array,default:[5,10,15,25,50]},routes:{type:Object,required:!0},searchWidthClass:{type:String,default:"md:tw-w-1/3"},labels:{type:Object,default:()=>({create:"Novo",deleteOne:"Excluir este item",bulkDeleteSingular:"Excluir selecionado",bulkDeletePlural:"Excluir registros selecionados",searchPlaceholder:"Pesquisar..."})}},setup(s){const{screen:Y}=E(),a=s,h=$(),c=p(()=>h.props[a.collectionKey]??{}),B=p(()=>c.value?.data??[]),b=p(()=>h.props.filters??{}),l=v({page:c.value?.current_page??1,rowsPerPage:c.value?.per_page??10,rowsNumber:c.value?.total??0,sortBy:b.value?.sort??"id",descending:(b.value?.direction??"desc")==="desc"}),w=v(b.value?.search??""),n=v([]),d=p(()=>n.value.map(e=>e.id));j(()=>c.value,e=>{e&&Object.assign(l.value,{page:e.current_page,rowsPerPage:e.per_page,rowsNumber:e.total})});function y(){const e={page:l.value.page,per_page:l.value.rowsPerPage,sort:l.value.sortBy,direction:l.value.descending?"desc":"asc",search:w.value||void 0};q.get(route(a.routes.index),e,{preserveScroll:!0,preserveState:!0,replace:!0})}function R({pagination:e}){Object.assign(l.value,e),y()}function P(){l.value.page=1,y()}async function O(){!a.routes.bulkDestroy||d.value.length===0||!await $confirm({title:`${d.value.length>1?a.labels.bulkDeletePlural:a.labels.bulkDeleteSingular}!`,message:`Remover ${d.value.length} registro(s)?`,okLabel:"Remover",okColor:"negative"})||q.delete(route(a.routes.bulkDestroy),{data:{ids:d.value},preserveScroll:!0,onSuccess:()=>{n.value=[]}})}return(e,u)=>(m(),x(D,null,[r(t(L),{title:s.title},null,8,["title"]),f("div",J,[r(K,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:g(()=>[f("div",M,[f("div",X,[r(t(T),{href:e.route(s.routes.create)},{default:g(()=>[r(S,{color:"positive",unelevated:"",icon:"add",label:s.labels.create,class:"tw-w-auto"},null,8,["label"])]),_:1},8,["href"]),a.enableSelection?(m(),x(D,{key:0},[s.routes.bulkDestroy&&n.value.length>0?(m(),A(S,{key:0,color:"negative",unelevated:"",icon:"delete",disable:n.value.length===0,label:"Excluir",onClick:O},null,8,["disable"])):C("",!0)],64)):C("",!0)]),r(N,{modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=i=>w.value=i),dense:"",outlined:"",clearable:"",placeholder:s.labels.searchPlaceholder,class:z(["tw-w-full md:tw-w-1/3 md:tw-ml-auto",s.searchWidthClass]),onKeyup:U(P,["enter"])},{append:g(()=>[r(V,{name:"search",class:"cursor-pointer",onClick:P})]),_:1},8,["modelValue","placeholder","class"])]),r(I,{flat:"",bordered:"","row-key":"id",pagination:l.value,"onUpdate:pagination":u[1]||(u[1]=i=>l.value=i),rows:B.value,columns:s.columns,"rows-per-page-options":a.rowsPerPageOptions,selection:a.enableSelection?"multiple":"none",selected:n.value,"onUpdate:selected":u[2]||(u[2]=i=>n.value=i),"binary-state-sort":"","no-data-label":t(o).noData,"no-results-label":t(o).noResults,"loading-label":t(o).loading,"rows-per-page-label":t(o).recordsPerPage,"all-rows-label":t(o).allRows,"pagination-label":t(o).pagination,"selected-rows-label":t(o).selectedRecords,onRequest:R},F({_:2},[W(e.$slots,(i,k)=>({name:k,fn:g(Q=>[_(e.$slots,k,G(H(Q)))])}))]),1032,["pagination","rows","columns","rows-per-page-options","selection","selected","no-data-label","no-results-label","loading-label","rows-per-page-label","all-rows-label","pagination-label","selected-rows-label"])]),_:3})])],64))}};export{le as _};
