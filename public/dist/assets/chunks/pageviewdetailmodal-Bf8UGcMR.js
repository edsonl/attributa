import{r as j,s as P,h as z,F as T,k as S,Q as q,a as M,b as H,v as J}from"./vendor-quasar-C1KtC9YM.js";import{_ as K}from"../app-CcbjGm3U.js";import{f as o,C as r,H as i,D as n,E as g,L as b,Q as e,N as a,O as L,G as v,I as f,J as k}from"./vendor-D8nj3W7R.js";const Y={class:"detail-section"},Z={class:"section-card"},W={class:"section-card__body"},X={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},ee={class:"detail-value"},te={class:"detail-value"},le={class:"detail-value"},ae={class:"tw-mt-1"},se={class:"ip-category-description"},oe={class:"tw-mt-1"},ie={class:"detail-section"},de={class:"section-card"},re={class:"section-card__body"},ne={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},ce={class:"detail-value tw-flex tw-items-center tw-gap-2"},ue=["src","alt"],ve={class:"detail-label"},_e={class:"detail-value"},ge={class:"detail-section xl:tw-col-span-2"},me={class:"section-card"},ye={class:"section-card__body section-body--stack"},pe={class:"detail-value tw-break-all"},we={class:"tw-mt-2"},be={class:"tw-text-xs tw-uppercase tw-text-slate-500"},fe={class:"tw-text-sm tw-font-medium tw-break-all"},ke={key:1,class:"tw-text-sm tw-text-slate-500"},Ce={class:"detail-section xl:tw-col-span-2"},he={class:"section-card"},xe={class:"section-card__body"},Ne={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Pe={class:"detail-value"},Se={class:"detail-value"},Le={class:"tw-mt-1"},Ie={class:"ip-category-description"},Ve={class:"detail-value"},Ae={class:"detail-value"},Be={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-3 tw-mt-4"},De={class:"detail-label"},Qe={class:"detail-value"},Ue={__name:"PageviewDetailModal",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(m,{emit:I}){const V={name:"Não determinado",color_hex:"#FCE7F3",description:"Categoria ainda não determinada."},c=m,A=I,y=o({get:()=>c.modelValue,set:l=>A("update:modelValue",l)}),u=o(()=>c.payload?.pageview??{}),C=o(()=>c.payload?.url??{full:null,origin:null,path:null,query_params:{}}),_=o(()=>c.payload?.geo??{}),d=o(()=>c.payload?.network??{}),h=o(()=>{const l=C.value?.query_params??{};return Object.entries(l)}),B=o(()=>h.value.length>0),D=o(()=>u.value?.campaign?.name??"-"),Q=o(()=>d.value?.flags??{}),p=o(()=>u.value?.ip_category??V),w=o(()=>d.value?.ip_category??null),U=o(()=>w.value?.color_hex??"#475569"),E=o(()=>w.value?.name??"-"),O=o(()=>w.value?.description??"Sem descrição."),F=o(()=>R(C.value?.full||"")),x=o(()=>{const l=_.value?.country_code;return l?`${c.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null});function R(l){if(!l)return"-";try{const t=typeof window<"u"?window.location.origin:"https://placeholder.local",s=new URL(l,t);return`${s.origin}${s.pathname}`}catch{return l.split("?")[0]??l}}function $(l){return l==null?"-":l?"Sim":"Não"}function G(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}return(l,t)=>(i(),r(J,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=s=>y.value=s),"transition-show":"scale","transition-hide":"scale"},{default:n(()=>[g(j,{class:"pageview-detail-card"},{default:n(()=>[g(P,{class:"tw-flex tw-justify-end"},{default:n(()=>[g(z,{icon:"close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=s=>y.value=!1)})]),_:1}),m.loading?(i(),r(T,{key:0,indeterminate:"",color:"primary"})):b("",!0),m.loading?b("",!0):(i(),r(P,{key:1,class:"tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},{default:n(()=>[e("section",Y,[e("div",Z,[t[7]||(t[7]=e("div",{class:"section-card__header"},"VISITA",-1)),e("div",W,[e("div",X,[e("div",null,[t[2]||(t[2]=e("div",{class:"detail-label"},"Data/Horário",-1)),e("div",ee,a(u.value.created_at_formatted),1)]),e("div",null,[t[3]||(t[3]=e("div",{class:"detail-label"},"Campanha",-1)),e("div",te,a(D.value),1)]),e("div",null,[t[4]||(t[4]=e("div",{class:"detail-label"},"IP",-1)),e("div",le,a(u.value.ip||"-"),1)]),e("div",null,[t[5]||(t[5]=e("div",{class:"detail-label"},"Categoria de IP",-1)),e("div",ae,[e("div",{class:"ip-category-label",style:L({color:p.value.color_hex})},a(p.value.name),5),e("div",se,a(p.value.description||"Sem descrição."),1)])]),e("div",null,[t[6]||(t[6]=e("div",{class:"detail-label"},"Conversão",-1)),e("div",oe,[u.value.conversion?(i(),r(S,{key:0,color:"green",label:"Convertido"})):(i(),r(S,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])])])])])]),e("section",ie,[e("div",de,[t[9]||(t[9]=e("div",{class:"section-card__header"},"GEOLOCALIZAÇÃO",-1)),e("div",re,[e("div",ne,[e("div",null,[t[8]||(t[8]=e("div",{class:"detail-label"},"País",-1)),e("div",ce,[x.value?(i(),v("img",{key:0,src:x.value,alt:_.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,ue)):b("",!0),e("span",null,a(_.value.country_name??"-"),1)])]),(i(),v(f,null,k([{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],s=>e("div",{key:s.key},[e("div",ve,a(s.label),1),e("div",_e,a(_.value[s.key]??"-"),1)])),64))])])])]),e("section",ge,[e("div",me,[t[12]||(t[12]=e("div",{class:"section-card__header"},"ORIGEM DA URL",-1)),e("div",ye,[e("div",null,[t[10]||(t[10]=e("div",{class:"detail-label"},"Página (sem parâmetros)",-1)),e("div",pe,a(F.value),1)]),e("div",null,[t[11]||(t[11]=e("div",{class:"detail-label"},"Parâmetros",-1)),e("div",we,[B.value?(i(),r(q,{key:0,class:"rounded-borders"},{default:n(()=>[(i(!0),v(f,null,k(h.value,([s,N])=>(i(),r(M,{key:`${s}-${N}`},{default:n(()=>[g(H,null,{default:n(()=>[e("div",be,a(s),1),e("div",fe,a(G(N)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})):(i(),v("div",ke,"Sem parâmetros na URL."))])])])])]),e("section",Ce,[e("div",he,[t[18]||(t[18]=e("div",{class:"section-card__header"},"REDE & SEGURANÇA",-1)),e("div",xe,[e("div",Ne,[e("div",null,[t[13]||(t[13]=e("div",{class:"detail-label"},"ISP",-1)),e("div",Pe,a(d.value.isp||"-"),1)]),e("div",null,[t[14]||(t[14]=e("div",{class:"detail-label"},"Organização",-1)),e("div",Se,a(d.value.organization||"-"),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),e("div",Le,[e("div",{class:"ip-category-label",style:L({color:U.value})},a(E.value),5),e("div",Ie,a(O.value),1)])]),e("div",null,[t[16]||(t[16]=e("div",{class:"detail-label"},"Fraud Score",-1)),e("div",Ve,a(d.value.fraud_score??"-"),1)]),e("div",null,[t[17]||(t[17]=e("div",{class:"detail-label"},"Última verificação",-1)),e("div",Ae,a(d.value.last_checked_formatted??d.value.last_checked??"-"),1)])]),e("div",Be,[(i(),v(f,null,k([{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],s=>e("div",{key:s.key},[e("div",De,a(s.label),1),e("div",Qe,a($(Q.value[s.key])),1)])),64))])])])])]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}},Re=K(Ue,[["__scopeId","data-v-ca48f5d1"]]);export{Re as default};
