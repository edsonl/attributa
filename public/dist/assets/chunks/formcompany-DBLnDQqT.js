import{s as D,y as Q,x as s,h as N,r as E}from"./vendor-quasar-CQUzQrOh.js";import{r as f,f as F,w as J,G as _,H as g,Q as h,E as t,D as u,M,N as R,$ as W,u as O,R as T}from"./vendor-D8nj3W7R.js";const G={class:"tw-flex tw-justify-center tw-py-6"},H={class:"tw-w-full md:tw-w-[760px]"},q={class:"md:tw-grid md:tw-grid-cols-3 tw-grid-cols-1 tw-gap-3"},K={class:"tw-flex tw-justify-between tw-pt-2"},Y={__name:"FormCompany",props:{mode:{type:String,default:"create"},company:{type:Object,default:()=>({id:null,name:"",corporate_name:"",cnpj:"",phone:"",whatsapp:"",email:"",site:"",notes:""})}},emits:["submit"],setup(P,{emit:B}){const v=P,S=B,n=f({name:"",corporate_name:"",cnpj:"",phone:"",whatsapp:"",email:"",site:"",notes:""}),w=F(()=>v.mode==="edit"),o=e=>(e||"").replace(/\D+/g,"");function r(e){return[10,11,8,9].includes(e.length)}function p(e){return e?(e=o(e),e.length===11?`(${e.slice(0,2)}) ${e.slice(2,7)}-${e.slice(7)}`:e.length===10?`(${e.slice(0,2)}) ${e.slice(2,6)}-${e.slice(6)}`:e.length===9?`${e.slice(0,5)}-${e.slice(5)}`:e.length===8?`${e.slice(0,4)}-${e.slice(4)}`:""):""}function U(){const e=o(n.value.phone);n.value.phone=r(e)?p(e):null}function z(){const e=o(n.value.whatsapp);n.value.whatsapp=r(e)?p(e):null}const V=f(""),b=f("");function y(e){const a=o(n.value[e]);let l="";a.length>=11?l="(##) #####-####":a.length===10?l="(##) ####-####":a.length===9?l="#####-####":a.length===8?l="####-####":l="",e==="phone"?V.value=l:b.value=l}function $(e){if(!e||e.length!==14||/^(\d)\1{13}$/.test(e))return!1;const a=j=>{let i=j.length,d=i-7,x=0;for(let c=i;c>=1;c--)x+=parseInt(j[i-c],10)*d--,d<2&&(d=9);const C=11-x%11;return C>9?0:C},l=a(e.substring(0,12)),m=a(e.substring(0,12)+l.toString());return e.endsWith(`${l}${m}`)}function k(e){return e.length!==14?"":`${e.slice(0,2)}.${e.slice(2,5)}.${e.slice(5,8)}/${e.slice(8,12)}-${e.slice(12)}`}function A(){const e=o(n.value.cnpj);n.value.cnpj=$(e)?k(e):null}J(()=>v.company,e=>{e&&Object.assign(n.value,{name:e.name??"",corporate_name:e.corporate_name??"",cnpj:e.cnpj??"",phone:e.phone??"",whatsapp:e.whatsapp??"",email:e.email??"",site:e.site??"",notes:e.notes??""})},{immediate:!0});function I(){const e=o(n.value.phone),a=o(n.value.whatsapp),l=o(n.value.cnpj),m={...n.value,phone:e&&r(e)?p(e):null,whatsapp:a&&r(a)?p(a):null,cnpj:l&&$(l)?k(l):null};S("submit",m)}return(e,a)=>(g(),_("div",G,[h("div",H,[t(E,{flat:"",bordered:"",class:"tw-rounded-2xl"},{default:u(()=>[t(D,{class:"tw-text-lg tw-font-semibold"},{default:u(()=>[M(R(w.value?"Editar empresa":"Cadastrar empresa"),1)]),_:1}),t(D,null,{default:u(()=>[t(Q,{onSubmit:W(I,["prevent"]),class:"tw-space-y-4"},{default:u(()=>[t(s,{modelValue:n.value.name,"onUpdate:modelValue":a[0]||(a[0]=l=>n.value.name=l),label:"Nome *",outlined:"",dense:"","lazy-rules":"",rules:[l=>!!l||"Informe o nome"]},null,8,["modelValue","rules"]),t(s,{modelValue:n.value.corporate_name,"onUpdate:modelValue":a[1]||(a[1]=l=>n.value.corporate_name=l),label:"Razão social (opcional)",outlined:"",dense:""},null,8,["modelValue"]),t(s,{modelValue:n.value.cnpj,"onUpdate:modelValue":a[2]||(a[2]=l=>n.value.cnpj=l),label:"CNPJ (opcional)",outlined:"",dense:"",mask:"##.###.###/####-##","fill-mask":"",onBlur:A,maxlength:"18"},null,8,["modelValue"]),h("div",q,[t(s,{modelValue:n.value.phone,"onUpdate:modelValue":a[3]||(a[3]=l=>n.value.phone=l),mask:V.value,label:"Telefone (opcional)",type:"tel",outlined:"",dense:"","fill-mask":"","unmasked-value":!1,onInput:a[4]||(a[4]=l=>y("phone")),onBlur:U,hint:"Aceita DDD + 8 ou 9 dígitos"},null,8,["modelValue","mask"]),t(s,{modelValue:n.value.whatsapp,"onUpdate:modelValue":a[5]||(a[5]=l=>n.value.whatsapp=l),mask:b.value,label:"WhatsApp (opcional)",type:"tel",outlined:"",dense:"","fill-mask":"","unmasked-value":!1,onInput:a[6]||(a[6]=l=>y("whatsapp")),onBlur:z,hint:"Aceita DDD + 8 ou 9 dígitos"},null,8,["modelValue","mask"]),t(s,{modelValue:n.value.email,"onUpdate:modelValue":a[7]||(a[7]=l=>n.value.email=l),label:"E-mail (opcional)",type:"email",outlined:"",dense:""},null,8,["modelValue"])]),t(s,{modelValue:n.value.site,"onUpdate:modelValue":a[8]||(a[8]=l=>n.value.site=l),label:"Site (opcional)",type:"url",outlined:"",dense:"",hint:"https://exemplo.com"},null,8,["modelValue"]),t(s,{modelValue:n.value.notes,"onUpdate:modelValue":a[9]||(a[9]=l=>n.value.notes=l),label:"Observações (até 255 caracteres)",outlined:"",dense:"",maxlength:"255",counter:""},null,8,["modelValue"]),h("div",K,[t(O(T),{href:e.route("panel.companies.index"),as:"button",type:"button"},{default:u(()=>[t(N,{flat:"",color:"primary",label:"Voltar"})]),_:1},8,["href"]),t(N,{type:"submit",color:"positive",unelevated:"",label:w.value?"Salvar alterações":"Cadastrar"},null,8,["label"])])]),_:1})]),_:1})]),_:1})])]))}};export{Y as default};
