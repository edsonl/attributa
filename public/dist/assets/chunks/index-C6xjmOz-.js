import{u as $,h as v,x as I,c as V,A,r as K,B as T}from"./vendor-quasar-DOe9rtvV.js";import{z as j,f,r as y,w as z,E as C,F as w,C as a,O as k,u as t,N as L,B as n,J as _,P as E,G as q,A as O,_ as U,I as F,$ as G,H as W,D as H,a0 as J,a1 as M,Q as B}from"./vendor-D6jaF0sv.js";import{q as o}from"./qtable-pt-CkdICETI.js";const X={class:"tw-space-y-3"},Y={class:"tw-flex tw-flex-col md:tw-flex-row tw-gap-3 tw-mb-3"},Z={class:"tw-flex tw-items-center tw-gap-2"},ee={__name:"IndexTable",props:{title:{type:String,required:!0},collectionKey:{type:String,required:!0},enableSelection:{type:Boolean,default:!0},columns:{type:Array,required:!0},rowsPerPageOptions:{type:Array,default:[5,10,15,25,50]},routes:{type:Object,required:!0},searchWidthClass:{type:String,default:"md:tw-w-1/3"},labels:{type:Object,default:()=>({create:"Novo",deleteOne:"Excluir este item",bulkDeleteSingular:"Excluir selecionado",bulkDeletePlural:"Excluir registros selecionados",searchPlaceholder:"Pesquisar..."})}},setup(s){const{screen:P}=$(),l=s,p=j(),u=f(()=>p.props[l.collectionKey]??{}),g=f(()=>u.value?.data??[]),b=f(()=>p.props.filters??{}),r=y({page:u.value?.current_page??1,rowsPerPage:u.value?.per_page??10,rowsNumber:u.value?.total??0,sortBy:b.value?.sort??"id",descending:(b.value?.direction??"desc")==="desc"}),h=y(b.value?.search??""),i=y([]),m=f(()=>i.value.map(e=>e.id));z(()=>u.value,e=>{e&&Object.assign(r.value,{page:e.current_page,rowsPerPage:e.per_page,rowsNumber:e.total})});function x(){const e={page:r.value.page,per_page:r.value.rowsPerPage,sort:r.value.sortBy,direction:r.value.descending?"desc":"asc",search:h.value||void 0};B.get(route(l.routes.index),e,{preserveScroll:!0,preserveState:!0,replace:!0})}function N({pagination:e}){Object.assign(r.value,e),x()}function S(){r.value.page=1,x()}async function Q(){!l.routes.bulkDestroy||m.value.length===0||!await $confirm({title:`${m.value.length>1?l.labels.bulkDeletePlural:l.labels.bulkDeleteSingular}!`,message:`Remover ${m.value.length} registro(s)?`,okLabel:"Remover",okColor:"negative"})||B.delete(route(l.routes.bulkDestroy),{data:{ids:m.value},preserveScroll:!0,onSuccess:()=>{i.value=[]}})}return(e,c)=>(w(),C(q,null,[a(t(L),{title:s.title},null,8,["title"]),k("div",X,[a(K,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:n(()=>[k("div",Y,[k("div",Z,[a(t(E),{href:e.route(s.routes.create)},{default:n(()=>[a(v,{color:"positive",unelevated:"",icon:"add",label:s.labels.create,class:"tw-w-auto"},null,8,["label"])]),_:1},8,["href"]),l.enableSelection?(w(),C(q,{key:0},[s.routes.bulkDestroy&&i.value.length>0?(w(),O(v,{key:0,color:"negative",unelevated:"",icon:"delete",disable:i.value.length===0,label:"Excluir",onClick:Q},null,8,["disable"])):_("",!0)],64)):_("",!0)]),a(I,{modelValue:h.value,"onUpdate:modelValue":c[0]||(c[0]=d=>h.value=d),dense:"",outlined:"",clearable:"",placeholder:s.labels.searchPlaceholder,class:F(["tw-w-full md:tw-w-1/3 md:tw-ml-auto",s.searchWidthClass]),onKeyup:U(S,["enter"])},{append:n(()=>[a(V,{name:"search",class:"cursor-pointer",onClick:S})]),_:1},8,["modelValue","placeholder","class"])]),a(A,{flat:"",bordered:"","row-key":"id",pagination:r.value,"onUpdate:pagination":c[1]||(c[1]=d=>r.value=d),rows:g.value,columns:s.columns,"rows-per-page-options":l.rowsPerPageOptions,selection:l.enableSelection?"multiple":"none",selected:i.value,"onUpdate:selected":c[2]||(c[2]=d=>i.value=d),"binary-state-sort":"","no-data-label":t(o).noData,"no-results-label":t(o).noResults,"loading-label":t(o).loading,"rows-per-page-label":t(o).recordsPerPage,"all-rows-label":t(o).allRows,"pagination-label":t(o).pagination,"selected-rows-label":t(o).selectedRecords,onRequest:N},G({_:2},[W(e.$slots,(d,D)=>({name:D,fn:n(R=>[H(e.$slots,D,J(M(R)))])}))]),1032,["pagination","rows","columns","rows-per-page-options","selection","selected","no-data-label","no-results-label","loading-label","rows-per-page-label","all-rows-label","pagination-label","selected-rows-label"])]),_:3})])],64))}},se={__name:"Index",setup(s){const P=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"name",label:"Nome",field:"name",align:"left",sortable:!0},{name:"email",label:"E-mail",field:"email",align:"left",sortable:!0},{name:"created_at",label:"Criado em",field:"created_at",align:"left",sortable:!0},{name:"actions",label:"Ações",field:"actions",align:"right"}],l={index:"panel.users.index",create:"panel.users.create",edit:"panel.users.edit",destroy:"panel.users.destroy",bulkDestroy:"panel.users.bulk-destroy"};return(p,u)=>(w(),O(ee,{title:"Gerenciar usuários",collectionKey:"users",columns:P,routes:l,labels:{create:"Novo usuário",deleteOne:"Excluir usuário!",bulkDeleteSingular:"Excluir usuário",bulkDeletePlural:"Excluir usuários selecionados",searchPlaceholder:"Pesquisar por nome ou e-mail"}},{"body-cell-actions":n(g=>[a(T,{props:g,class:"tw-text-right"},{default:n(()=>[a(t(E),{href:p.route(l.edit,g.row.id)},{default:n(()=>[a(v,{dense:"",flat:"",icon:"edit"})]),_:1},8,["href"]),a(v,{dense:"",flat:"",icon:"delete",color:"negative",onClick:b=>p.destroyOne(g.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1}))}};export{se as default};
