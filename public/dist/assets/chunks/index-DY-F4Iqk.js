import{u as da,C as X,x as P,J as re,h as r,K as ue,c as Z,z as ee,n as ke,A as ca,B as g,k as he,r as M,s as B,i as de,U as Ue,t as N,G as ae,T as ma,v as ce}from"./vendor-quasar-DSLrBDx5.js";import{r as i,f as Te,w as Pe,e as va,E as Q,F as b,C as t,u as Me,N as pa,B as o,O as d,K as S,A as me,L as k,J as ve,j as le,G as fa,S as _}from"./vendor-D6jaF0sv.js";import ga from"./conversionpageviewdetailmodal-DnQAOeIX.js";import{_ as _a}from"../app-gQuhCOoY.js";const wa={class:"q-mb-md tw-flex tw-flex-wrap md:tw-flex-nowrap tw-items-start tw-gap-3"},ba={class:"tw-w-full sm:tw-w-[320px] md:tw-w-[300px]"},ya={class:"tw-w-full sm:tw-w-[320px] md:tw-w-[300px]"},xa={class:"tw-grid tw-grid-cols-1 md:tw-grid-cols-[150px_1fr] tw-gap-3 tw-p-3"},Ca={class:"tw-flex tw-flex-col tw-gap-2"},Da={class:"tw-flex tw-justify-end tw-gap-2 tw-px-3 tw-pb-3"},Va={class:"tw-w-full md:tw-flex-1 tw-mt-1 md:tw-mt-2"},Sa={class:"tw-flex tw-flex-wrap tw-gap-3"},ka={class:"tw-w-full md:tw-w-auto md:tw-ml-auto tw-flex tw-gap-2 md:tw-self-start"},ha={class:"tw-flex tw-items-center tw-gap-1"},Ua={class:"tw-flex tw-items-center tw-gap-2"},Ta=["src","alt"],Pa={key:0},Ma={class:"tw-flex tw-flex-col tw-gap-1"},Ba={class:"text-h6"},za={key:0,class:"text-body1"},Ya={key:1,class:"text-body1"},Ea={__name:"Index",setup(Fa){const pe=i([]),te=i(!1),v=da(),m=i({page:1,rowsPerPage:20,rowsNumber:0,sortBy:"conversion_event_time",descending:!0}),h=i(null),Be=i(null),y=i({include_manual:!0,include_automatic:!0}),p=i({from:"",to:""}),x=i({from:"",to:""}),$=i(!1),oe=i(!1),I=i([]),U=i([]),A=i([]),j=i(!1),ne=i(!1),ie=i(null),z=i(!1),Y=i(!1),c=i({}),H=i(!1),O=i(!1),E=i(null),u=i({campaign_id:null,conversion_event_time:"",conversion_timezone:"",gclid:"",conversion_value:1}),F=i(!1),R=i(!1),G=i(!1),q=i(!1),fe=i([]),f=i({has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""}),n=i({campaign_id:null,date_from:"",date_to:"",include_manual:!0,include_automatic:!1}),C=i(""),D=i(""),ge="https://attributa.master.dev.br".replace(/\/$/,""),ze=[{name:"conversion_event_time",label:"Data",field:"conversion_event_time_formatted",sortable:!0,align:"left"},{name:"type",label:"Tipo",field:"type",sortable:!1,align:"left"},{name:"campaign_name",label:"Campanha",field:"campaign_name",sortable:!0,align:"left"},{name:"campaign_code",label:"Cód/Campanha",field:"campaign_code",sortable:!0,align:"left"},{name:"conversion_name",label:"Pixel/Conversão",field:"conversion_name",sortable:!0,align:"left"},{name:"pageview_id",label:"Pageview ID",field:"pageview_id",sortable:!0,align:"left"},{name:"country_code",label:"País",field:"country_code",sortable:!0,align:"left"},{name:"region_name",label:"Região",field:"region_name",sortable:!0,align:"left"},{name:"city",label:"Cidade",field:"city",sortable:!0,align:"left"},{name:"conversion_value",label:"Valor (USD)",field:"conversion_value",sortable:!0,align:"left"},{name:"currency_code",label:"Moeda",field:"currency_code",sortable:!0,align:"left"},{name:"google_upload_status",label:"Status Google",field:"google_upload_status",sortable:!0,align:"left"},{name:"actions",label:"Ações",field:"actions",sortable:!1,align:"left"}],_e=Te(()=>!!E.value?.is_manual),Ye=Te(()=>{const l=String(p.value?.from||""),e=String(p.value?.to||"");return!l||!e?"":`${xe(l)}  -  ${xe(e)}`});function Ee(l){return l==null||l===""?"-":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(Number(l))}function we(l){const e=l?.country_code;if(!e)return null;const a=String(e).toLowerCase();return`${ge}/assets/country-flags/${a}.svg`}function be(l){const e=String(l??"").trim().toLowerCase();return{0:"pending",1:"processing",2:"processing_export",3:"success",4:"exported",5:"error"}[e]??e}function Fe(l){const e=be(l);return e==="exported"||e==="success"?"positive":e==="processing_export"||e==="processing"?"warning":e==="pending"?"grey-6":e==="error"||e==="failed"?"negative":"primary"}function Re(l){const e=be(l);return e==="exported"?"Exportado":e==="processing_export"||e==="processing"?"Processando":e==="pending"?"Pendente":e==="error"||e==="failed"?"Erro":e==="success"?"Sucesso":l||"-"}function ye(l,e){const a=l==="manual"?!!e:y.value.include_manual,s=l==="automatic"?!!e:y.value.include_automatic;y.value={include_manual:a,include_automatic:s},m.value.page=1,V({pagination:m.value})}function L(l){const e=new Date(l),a=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),w=String(e.getDate()).padStart(2,"0");return`${a}-${s}-${w}`}function xe(l){if(!l||!/^\d{4}-\d{2}-\d{2}$/.test(l))return"";const[e,a,s]=l.split("-");return`${s}.${a}.${e}`}function Le(){const l=new Date,e=new Date;return e.setDate(l.getDate()-6),{from:L(e),to:L(l)}}function Ne(l){const e=new Date,a=new Date(e),s=new Date(e);if(l==="last_7")a.setDate(e.getDate()-6);else if(l==="last_31")a.setDate(e.getDate()-30);else if(l==="month_current")a.setDate(1);else if(l==="month_previous"){const w=new Date(e.getFullYear(),e.getMonth()-1,1),T=new Date(e.getFullYear(),e.getMonth(),0);a.setTime(w.getTime()),s.setTime(T.getTime())}return{from:L(a),to:L(s)}}function J(l){x.value=Ne(l)}function Qe(){const l=L(new Date);x.value={from:l,to:l}}function $e(){x.value={from:String(p.value?.from||""),to:String(p.value?.to||"")}}function Ie(){$.value=!1}function Ae(){const l=String(x.value?.from||""),e=String(x.value?.to||"");l&&e&&(p.value={from:l,to:e}),$.value=!1}function je(l){E.value=l,H.value=!0}function Ce(){H.value=!1,E.value=null}async function He(){if(!(!E.value||O.value)){O.value=!0;try{await _.delete(route("panel.conversoes.destroy",E.value.id)),v.notify({type:"positive",message:"Conversão excluída com sucesso."}),Ce(),await V({pagination:m.value})}catch(l){const e=l?.response?.data?.message||"Não foi possível excluir a conversão.";v.notify({type:"negative",message:e})}finally{O.value=!1}}}async function Oe(l){if(!l){v.notify({type:"warning",message:"Pageview não encontrada para esta conversão."});return}j.value=!0,ne.value=!0,ie.value=null;try{const e=await _.get(route("panel.atividade.pageviews.show",l));ie.value=e.data}catch{j.value=!1,v.notify({type:"negative",message:"Não foi possível carregar os detalhes da pageview."})}finally{ne.value=!1}}function Ge(){_.get(route("panel.conversoes.campaigns")).then(l=>{I.value=l.data})}function qe(){_.get(route("panel.conversoes.timezones")).then(l=>{U.value=l.data,A.value=l.data})}function Je(){const l=new Date,e=l.getTimezoneOffset();return new Date(l.getTime()-e*60*1e3).toISOString().slice(0,16)}function De(l=null){const e=I.value.find(a=>Number(a.id)===Number(l));return e?.timezone_identifier?e.timezone_identifier:U.value.length>0?U.value.find(s=>s.identifier==="America/Sao_Paulo")?.identifier||U.value[0].identifier:"UTC"}function Ke(){c.value={},u.value={campaign_id:h.value??null,conversion_event_time:Je(),conversion_timezone:De(h.value),gclid:"",conversion_value:1},z.value=!0}function We(l){u.value.conversion_timezone=De(l)}function Xe(l,e){e(()=>{const a=String(l||"").trim().toLowerCase();if(a===""){A.value=U.value;return}A.value=U.value.filter(s=>{const w=String(s.label||"").toLowerCase(),T=String(s.identifier||"").toLowerCase();return w.includes(a)||T.includes(a)})})}function K(l){return String(l||"").replace("T"," ")}function Ve(l){return String(l||"").replace(" ","T")}function se(){n.value={campaign_id:null,date_from:"",date_to:"",include_manual:!0,include_automatic:!1},C.value="",D.value="",f.value={has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""}}function Ze(){z.value=!1,c.value={}}async function ea(){if(!Y.value){if(Y.value=!0,c.value={},!String(u.value.gclid||"").trim()){c.value={...c.value,gclid:["Informe o GCLID."]},Y.value=!1;return}try{await _.post(route("panel.conversoes.store-manual"),{campaign_id:u.value.campaign_id,conversion_event_time:u.value.conversion_event_time,conversion_timezone:u.value.conversion_timezone,gclid:u.value.gclid,conversion_value:u.value.conversion_value||1}),z.value=!1,v.notify({type:"positive",message:"Conversão manual cadastrada com sucesso."}),await V({pagination:m.value})}catch(l){if(l.response?.status===422){c.value=l.response.data.errors||{};return}v.notify({type:"negative",message:"Não foi possível cadastrar a conversão manual."})}finally{Y.value=!1}}}async function aa(){se(),F.value=!0,G.value=!0;try{const{data:l}=await _.get(route("panel.conversoes.campaigns"));fe.value=l}catch{F.value=!1,v.notify({type:"negative",message:"Não foi possível carregar as campanhas para exportação."})}finally{G.value=!1}}async function la(l){if(n.value.campaign_id=l,n.value.date_from="",n.value.date_to="",f.value={has_rows:!1,timezone:"UTC",min_datetime_local:"",max_datetime_local:""},!!l){R.value=!0;try{const{data:e}=await _.get(route("panel.conversoes.export-range"),{params:{campaign_id:l}});f.value=e,n.value.date_from=K(e.min_datetime_local||""),n.value.date_to=K(e.max_datetime_local||"")}catch{v.notify({type:"negative",message:"Não foi possível carregar as datas para exportação."})}finally{R.value=!1}}}function ta(){C.value=n.value.date_from||K(f.value.min_datetime_local||"")}function oa(){n.value.date_from=C.value||n.value.date_from}function na(){D.value=n.value.date_to||K(f.value.max_datetime_local||"")}function ia(){n.value.date_to=D.value||n.value.date_to}function Se(){F.value=!1,se()}function sa(l){return l&&/filename=\"?([^\";]+)\"?/i.exec(l)?.[1]||null}async function ra(l){if(!(l?.response?.headers?.["content-type"]||"").includes("application/json"))return null;try{const a=await l.response.data.text();return JSON.parse(a)?.message||null}catch{return null}}async function ua(){if(!q.value){if(!n.value.campaign_id){v.notify({type:"warning",message:"Selecione uma campanha para exportar."});return}if(!n.value.include_manual&&!n.value.include_automatic){v.notify({type:"warning",message:"Selecione pelo menos um tipo de conversão para exportar."});return}q.value=!0;try{const l=await _.get(route("panel.conversoes.export-csv"),{params:{campaign_id:n.value.campaign_id,date_from:Ve(n.value.date_from),date_to:Ve(n.value.date_to),include_manual:n.value.include_manual,include_automatic:n.value.include_automatic},responseType:"blob"}),e=new Blob([l.data],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=window.URL.createObjectURL(e);a.href=s,a.download=sa(l.headers["content-disposition"])||"google_ads_conversions.csv",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),v.notify({type:"positive",message:"CSV gerado com sucesso."}),Se()}catch(l){const e=await ra(l);v.notify({type:"negative",message:e||"Não foi possível gerar o CSV."})}finally{q.value=!1}}}function V(l=null){te.value=!0;const e=l?.pagination??m.value,{page:a,rowsPerPage:s,sortBy:w,descending:T}=e;_.get(route("panel.conversoes.data"),{params:{page:a,per_page:s,sortBy:w,descending:T,campaign_id:h.value,date_from:p.value?.from||void 0,date_to:p.value?.to||void 0,include_manual:y.value.include_manual,include_automatic:y.value.include_automatic}}).then(W=>{pe.value=W.data.data,m.value={...m.value,page:W.data.current_page,rowsPerPage:W.data.per_page,rowsNumber:W.data.total,sortBy:w,descending:T}}).finally(()=>{te.value=!1})}return Pe(h,()=>{oe.value&&(m.value.page=1,V({pagination:m.value}))}),Pe(()=>[p.value?.from,p.value?.to],()=>{oe.value&&(m.value.page=1,V({pagination:m.value}))}),va(()=>{p.value=Le(),oe.value=!0,Ge(),qe(),V({pagination:m.value})}),(l,e)=>(b(),Q(fa,null,[t(Me(pa),{title:"Conversões"}),t(M,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:o(()=>[d("div",wa,[d("div",ba,[t(X,{ref_key:"tableRef",ref:Be,modelValue:h.value,"onUpdate:modelValue":e[0]||(e[0]=a=>h.value=a),options:I.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"",clearable:"",dense:"",outlined:"",class:"filter-field campaign-filter-field",label:"Filtrar por campanha"},null,8,["modelValue","options"])]),d("div",ya,[t(P,{dense:"",outlined:"",readonly:"",class:"filter-field",label:"Período","model-value":Ye.value,placeholder:"Selecione um intervalo"},{prepend:o(()=>[t(Z,{name:"event"})]),append:o(()=>[t(Z,{name:"expand_more"})]),default:o(()=>[t(re,{modelValue:$.value,"onUpdate:modelValue":e[6]||(e[6]=a=>$.value=a),anchor:"bottom left",self:"top left",offset:[0,6],"transition-show":"scale","transition-hide":"scale",onBeforeShow:$e},{default:o(()=>[d("div",xa,[d("div",Ca,[t(r,{flat:"","no-caps":"",dense:"",label:"Hoje",onClick:Qe}),t(r,{flat:"","no-caps":"",dense:"",label:"Últimos 7 dias",onClick:e[1]||(e[1]=a=>J("last_7"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Últimos 31 dias",onClick:e[2]||(e[2]=a=>J("last_31"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Mês atual",onClick:e[3]||(e[3]=a=>J("month_current"))}),t(r,{flat:"","no-caps":"",dense:"",label:"Mês anterior",onClick:e[4]||(e[4]=a=>J("month_previous"))})]),t(ue,{modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=a=>x.value=a),range:"",mask:"YYYY-MM-DD",minimal:"",class:"period-date-picker"},null,8,["modelValue"])]),d("div",Da,[t(r,{flat:"","no-caps":"",label:"Cancelar",onClick:Ie}),t(r,{color:"primary","no-caps":"",label:"Aplicar",onClick:Ae})])]),_:1},8,["modelValue"])]),_:1},8,["model-value"])]),d("div",Va,[d("div",Sa,[t(ee,{"model-value":y.value.include_manual,label:"Manual","onUpdate:modelValue":e[7]||(e[7]=a=>ye("manual",a))},null,8,["model-value"]),t(ee,{"model-value":y.value.include_automatic,label:"Automática","onUpdate:modelValue":e[8]||(e[8]=a=>ye("automatic",a))},null,8,["model-value"])])]),d("div",ka,[t(r,{color:"primary",unelevated:"",icon:"download",label:"Exportar",loading:G.value,onClick:aa},{default:o(()=>[t(ke,{anchor:"top middle",self:"bottom middle"},{default:o(()=>[...e[28]||(e[28]=[S(" Exportar conversões por campanha e período. ",-1)])]),_:1})]),_:1},8,["loading"]),t(r,{color:"positive",unelevated:"",icon:"add",label:"Conversão",onClick:Ke},{default:o(()=>[t(ke,{anchor:"top middle",self:"bottom middle"},{default:o(()=>[...e[29]||(e[29]=[S(" Adicionar uma nova conversão manual. ",-1)])]),_:1})]),_:1})])]),t(ca,{rows:pe.value,columns:ze,"row-key":"id",loading:te.value,pagination:m.value,"onUpdate:pagination":e[9]||(e[9]=a=>m.value=a),"binary-state-sort":!0,"rows-per-page-options":[5,10,15,20,25,50],onRequest:V},{"body-cell-conversion_event_time":o(a=>[t(g,{props:a},{default:o(()=>[S(k(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-type":o(a=>[t(g,{props:a},{default:o(()=>[t(he,{color:a.row.is_manual?"info":"positive",label:a.row.is_manual?"Manual":"Automática"},null,8,["color","label"])]),_:2},1032,["props"])]),"body-cell-conversion_value":o(a=>[t(g,{props:a},{default:o(()=>[S(k(Ee(a.value)),1)]),_:2},1032,["props"])]),"body-cell-pageview_id":o(a=>[t(g,{props:a},{default:o(()=>[d("div",ha,[d("span",null,k(a.value??"-"),1),a.value?(b(),me(r,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"manage_search",color:"primary",onClick:s=>Oe(a.value)},null,8,["onClick"])):ve("",!0)])]),_:2},1032,["props"])]),"body-cell-country_code":o(a=>[t(g,{props:a},{default:o(()=>[d("div",Ua,[we(a.row)?(b(),Q("img",{key:0,src:we(a.row),alt:a.value,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,Ta)):ve("",!0),d("span",null,k(a.value?a.value.toUpperCase():"-"),1)])]),_:2},1032,["props"])]),"body-cell-region_name":o(a=>[t(g,{props:a},{default:o(()=>[S(k(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-city":o(a=>[t(g,{props:a},{default:o(()=>[S(k(a.value||"-"),1)]),_:2},1032,["props"])]),"body-cell-google_upload_status":o(a=>[t(g,{props:a},{default:o(()=>[a.row.is_manual?(b(),Q("span",Pa,"-")):(b(),me(he,{key:1,color:Fe(a.row.google_upload_status_slug??a.value),label:a.row.google_upload_status_label??Re(a.row.google_upload_status_slug??a.value)},null,8,["color","label"]))]),_:2},1032,["props"])]),"body-cell-actions":o(a=>[t(g,{props:a},{default:o(()=>[t(r,{dense:"",flat:"",round:"",size:"sm",icon:"delete",class:"qtable-delete-btn",onClick:s=>je(a.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","loading","pagination"])]),_:1}),t(ce,{modelValue:F.value,"onUpdate:modelValue":e[19]||(e[19]=a=>F.value=a),persistent:"",onHide:se},{default:o(()=>[t(M,{class:"tw-w-full tw-max-w-lg"},{default:o(()=>[t(B,null,{default:o(()=>[...e[30]||(e[30]=[d("div",{class:"text-h6"},"Exportar CSV (Google)",-1)])]),_:1}),t(de),t(B,{class:"tw-space-y-3"},{default:o(()=>[t(X,{modelValue:n.value.campaign_id,"onUpdate:modelValue":[e[10]||(e[10]=a=>n.value.campaign_id=a),la],options:fe.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Campanha",outlined:"",dense:"",loading:G.value},null,8,["modelValue","options","loading"]),t(P,{modelValue:n.value.date_from,"onUpdate:modelValue":e[13]||(e[13]=a=>n.value.date_from=a),label:"Data inicial",outlined:"",dense:"",readonly:"",disable:!n.value.campaign_id||!f.value.has_rows||R.value},{append:o(()=>[t(Z,{name:"event",class:"cursor-pointer"},{default:o(()=>[t(re,{cover:"","transition-show":"scale","transition-hide":"scale",onBeforeShow:ta},{default:o(()=>[t(M,null,{default:o(()=>[t(ue,{modelValue:C.value,"onUpdate:modelValue":e[11]||(e[11]=a=>C.value=a),mask:"YYYY-MM-DD HH:mm"},null,8,["modelValue"]),t(Ue,{modelValue:C.value,"onUpdate:modelValue":e[12]||(e[12]=a=>C.value=a),mask:"YYYY-MM-DD HH:mm",format24h:""},null,8,["modelValue"]),t(N,{align:"right"},{default:o(()=>[le(t(r,{flat:"",label:"Cancelar"},null,512),[[ae]]),le(t(r,{flat:"",label:"Aplicar",color:"primary",onClick:oa},null,512),[[ae]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disable"]),t(P,{modelValue:n.value.date_to,"onUpdate:modelValue":e[16]||(e[16]=a=>n.value.date_to=a),label:"Data final",outlined:"",dense:"",readonly:"",disable:!n.value.campaign_id||!f.value.has_rows||R.value},{append:o(()=>[t(Z,{name:"event",class:"cursor-pointer"},{default:o(()=>[t(re,{cover:"","transition-show":"scale","transition-hide":"scale",onBeforeShow:na},{default:o(()=>[t(M,null,{default:o(()=>[t(ue,{modelValue:D.value,"onUpdate:modelValue":e[14]||(e[14]=a=>D.value=a),mask:"YYYY-MM-DD HH:mm"},null,8,["modelValue"]),t(Ue,{modelValue:D.value,"onUpdate:modelValue":e[15]||(e[15]=a=>D.value=a),mask:"YYYY-MM-DD HH:mm",format24h:""},null,8,["modelValue"]),t(N,{align:"right"},{default:o(()=>[le(t(r,{flat:"",label:"Cancelar"},null,512),[[ae]]),le(t(r,{flat:"",label:"Aplicar",color:"primary",onClick:ia},null,512),[[ae]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disable"]),d("div",Ma,[t(ee,{modelValue:n.value.include_manual,"onUpdate:modelValue":e[17]||(e[17]=a=>n.value.include_manual=a),label:"Conversão manual"},null,8,["modelValue"]),t(ee,{modelValue:n.value.include_automatic,"onUpdate:modelValue":e[18]||(e[18]=a=>n.value.include_automatic=a),label:"Conversão automática"},null,8,["modelValue"])]),n.value.campaign_id&&!f.value.has_rows&&!R.value?(b(),me(ma,{key:0,dense:"",rounded:"",class:"bg-orange-1 text-warning"},{default:o(()=>[...e[31]||(e[31]=[S(" Não existem conversões com identificadores de clique para exportar nesta campanha. ",-1)])]),_:1})):ve("",!0)]),_:1}),t(N,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Fechar",onClick:Se}),t(r,{color:"primary",unelevated:"",label:"Gerar CSV",disable:!n.value.campaign_id||!f.value.has_rows||!n.value.date_from||!n.value.date_to||!n.value.include_manual&&!n.value.include_automatic,loading:q.value,onClick:ua},null,8,["disable","loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:z.value,"onUpdate:modelValue":e[25]||(e[25]=a=>z.value=a),persistent:""},{default:o(()=>[t(M,{class:"tw-w-full tw-max-w-xl"},{default:o(()=>[t(B,null,{default:o(()=>[...e[32]||(e[32]=[d("div",{class:"text-h6"},"Cadastrar conversão manual",-1)])]),_:1}),t(de),t(B,{class:"tw-space-y-3"},{default:o(()=>[t(X,{modelValue:u.value.campaign_id,"onUpdate:modelValue":[e[20]||(e[20]=a=>u.value.campaign_id=a),We],options:I.value,"option-label":"name","option-value":"id","emit-value":"","map-options":"",label:"Campanha",outlined:"",dense:"",error:!!c.value.campaign_id,"error-message":c.value.campaign_id?.[0]},null,8,["modelValue","options","error","error-message"]),t(P,{modelValue:u.value.conversion_event_time,"onUpdate:modelValue":e[21]||(e[21]=a=>u.value.conversion_event_time=a),type:"datetime-local",label:"Data/hora da conversão",outlined:"",dense:"",error:!!c.value.conversion_event_time,"error-message":c.value.conversion_event_time?.[0]},null,8,["modelValue","error","error-message"]),t(P,{modelValue:u.value.conversion_value,"onUpdate:modelValue":e[22]||(e[22]=a=>u.value.conversion_value=a),modelModifiers:{number:!0},type:"number",step:"0.01",min:"0",label:"Valor (USD)",outlined:"",dense:"",error:!!c.value.conversion_value,"error-message":c.value.conversion_value?.[0],hint:"Padrão: 1. Se não alterar, será salvo como 1."},null,8,["modelValue","error","error-message"]),t(X,{modelValue:u.value.conversion_timezone,"onUpdate:modelValue":e[23]||(e[23]=a=>u.value.conversion_timezone=a),options:A.value,"option-label":"label","option-value":"identifier","emit-value":"","map-options":"","use-input":"","fill-input":"","hide-selected":"","input-debounce":"0",onFilter:Xe,label:"Timezone do evento",outlined:"",dense:"",error:!!c.value.conversion_timezone,"error-message":c.value.conversion_timezone?.[0]},null,8,["modelValue","options","error","error-message"]),t(P,{modelValue:u.value.gclid,"onUpdate:modelValue":e[24]||(e[24]=a=>u.value.gclid=a),modelModifiers:{trim:!0},label:"GCLID",outlined:"",dense:"",rules:[a=>!!String(a||"").trim()||"Informe o GCLID"],error:!!c.value.gclid,"error-message":c.value.gclid?.[0],hint:"Obrigatório."},null,8,["modelValue","rules","error","error-message"])]),_:1}),t(N,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Cancelar",onClick:Ze}),t(r,{color:"primary",unelevated:"",label:"Salvar",loading:Y.value,onClick:ea},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ce,{modelValue:H.value,"onUpdate:modelValue":e[26]||(e[26]=a=>H.value=a),persistent:""},{default:o(()=>[t(M,{class:"tw-w-full tw-max-w-xl"},{default:o(()=>[t(B,null,{default:o(()=>[d("div",Ba,k(_e.value?"Excluir conversão manual?":"Excluir conversão automática?"),1)]),_:1}),t(de),t(B,{class:"tw-space-y-3"},{default:o(()=>[_e.value?(b(),Q("div",za," Esta conversão foi criada manualmente. Deseja realmente removê-la? Esta ação não poderá ser desfeita. ")):(b(),Q("div",Ya," Esta conversão foi gerada automaticamente com base em dados de rastreamento. A exclusão não é recomendada, pois pode impactar relatórios históricos, análises de desempenho e reconciliação com plataformas externas. Esta ação não poderá ser desfeita. "))]),_:1}),t(N,{align:"right",class:"tw-gap-2 tw-p-4"},{default:o(()=>[t(r,{flat:"",label:"Cancelar",onClick:Ce}),t(r,{color:"negative",unelevated:"",label:"Excluir conversão",loading:O.value,onClick:He},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(ga,{modelValue:j.value,"onUpdate:modelValue":e[27]||(e[27]=a=>j.value=a),loading:ne.value,payload:ie.value,"asset-base-url":Me(ge)},null,8,["modelValue","loading","payload","asset-base-url"])],64))}},$a=_a(Ea,[["__scopeId","data-v-4c910f1c"]]);export{$a as default};
