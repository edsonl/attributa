import{H as B,h as p,s as R,x as T,c as D,A as $,B as v,r as z}from"./vendor-quasar-CQUzQrOh.js";import{f as h,C as N,H as f,D as n,M as Q,N as S,r as C,w as x,G as k,E as t,Q as u,u as r,P as A,R as O,a0 as E,I as P,J as F,S as _}from"./vendor-D8nj3W7R.js";import{q as c}from"./qtable-pt-CkdICETI.js";const H={__name:"StatusChip",props:{value:{type:[Boolean,Number],required:!0}},setup(g){const s=g,m=h(()=>s.value?"Ativo":"Inativo"),o=h(()=>s.value?"positive":"negative");return(a,y)=>(f(),N(B,{dense:"",color:o.value,"text-color":"white"},{default:n(()=>[Q(S(m.value),1)]),_:1},8,["color"]))}},K={class:"tw-space-y-3"},L={class:"tw-flex tw-items-center tw-justify-between tw-flex-col sm:tw-flex-row tw-gap-3"},U={class:"tw-flex tw-gap-3 tw-flex-col md:tw-flex-row"},G={class:"tw-flex tw-flex-wrap tw-gap-1"},X={__name:"Index",props:{campaigns:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(g){const s=g,m=h(()=>s.campaigns?.data??[]),o=C(s.filters?.search??""),a=C({page:s.campaigns?.current_page??1,rowsPerPage:s.campaigns?.per_page??15,rowsNumber:s.campaigns?.total??0,sortBy:s.filters?.sort??"created_at",descending:(s.filters?.direction??"desc")==="desc"});x(()=>s.campaigns,e=>{e&&(a.value.page=e.current_page,a.value.rowsPerPage=e.per_page,a.value.rowsNumber=e.total)}),x(()=>s.filters,e=>{a.value.sortBy=e?.sort??"created_at",a.value.descending=(e?.direction??"desc")==="desc",(e?.search??"")!==o.value&&(o.value=e?.search??"")});const y=[{name:"code",label:"Código",field:"code",align:"left",sortable:!0},{name:"name",label:"Nome",field:"name",align:"left",sortable:!0},{name:"channel",label:"Canal",field:e=>e.channel?.name??"-",align:"left"},{name:"countries",label:"Países",field:"countries",align:"left"},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"actions",label:"Ações",field:"actions",align:"right"}];function w(){const e={page:a.value.page,per_page:a.value.rowsPerPage,sort:a.value.sortBy,direction:a.value.descending?"desc":"asc",search:o.value||void 0};_.get(route("panel.campaigns.index"),e,{preserveState:!0,preserveScroll:!0,replace:!0})}function q({pagination:e}){Object.assign(a.value,e),w()}function b(){a.value.page=1,w()}function V(){o.value!==""&&(o.value="",a.value.page=1,w())}function j(e){_.visit(route("panel.campaigns.edit",e))}function I(e){confirm(`Deseja realmente remover a campanha "${e.name}"?`)&&_.delete(route("panel.campaigns.destroy",e.id))}return(e,i)=>(f(),k(P,null,[t(r(A),{title:"Campanhas"}),u("div",K,[u("div",L,[i[2]||(i[2]=u("h1",{class:"tw-text-lg tw-font-semibold"}," Campanhas ",-1)),t(r(O),{href:e.route("panel.campaigns.create")},{default:n(()=>[t(p,{color:"positive",icon:"add",label:"Nova Campanha",unelevated:""})]),_:1},8,["href"])]),t(z,{flat:"",bordered:""},{default:n(()=>[t(R,{class:"tw-space-y-3"},{default:n(()=>[u("div",U,[t(T,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value=l),dense:"",outlined:"",clearable:"",placeholder:"Pesquisar por código ou nome",class:"md:tw-flex-1",onKeyup:E(b,["enter"]),onClear:V},{append:n(()=>[t(D,{name:"search",class:"cursor-pointer",onClick:b})]),_:1},8,["modelValue"]),t(p,{outline:"",color:"primary",icon:"search",label:"Filtrar",class:"md:tw-w-auto",onClick:b})]),t($,{flat:"",rows:m.value,columns:y,"row-key":"id","binary-state-sort":"",pagination:a.value,"onUpdate:pagination":i[1]||(i[1]=l=>a.value=l),"rows-per-page-options":[10,15,25,50],"no-data-label":r(c).noData,"no-results-label":r(c).noResults,"loading-label":r(c).loading,"rows-per-page-label":r(c).recordsPerPage,"all-rows-label":r(c).allRows,"pagination-label":r(c).pagination,onRequest:q},{"body-cell-countries":n(l=>[t(v,{props:l},{default:n(()=>[u("div",G,[(f(!0),k(P,null,F(l.row.countries,d=>(f(),N(B,{key:d.id,dense:"",size:"sm"},{default:n(()=>[Q(S(d.iso2),1)]),_:2},1024))),128))])]),_:2},1032,["props"])]),"body-cell-status":n(l=>[t(v,{props:l,class:"tw-text-center"},{default:n(()=>[t(H,{value:l.row.status},null,8,["value"])]),_:2},1032,["props"])]),"body-cell-actions":n(l=>[t(v,{props:l,class:"tw-text-right"},{default:n(()=>[t(p,{flat:"",dense:"",size:"sm",icon:"edit",color:"primary",onClick:d=>j(l.row.id)},null,8,["onClick"]),t(p,{flat:"",dense:"",size:"sm",icon:"delete",color:"negative",onClick:d=>I(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","no-data-label","no-results-label","loading-label","rows-per-page-label","all-rows-label","pagination-label"])]),_:1})]),_:1})])],64))}};export{X as default};
