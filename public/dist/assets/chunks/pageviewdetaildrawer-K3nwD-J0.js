import{u as Y,h as x,C as Z,k as A,n as B,d as X}from"./vendor-quasar-D0sfcEux.js";import{_ as ee}from"../app-PRapPME2.js";import{f as i,E as d,F as o,J as p,C as v,B as y,O as e,A as L,L as a,M as U,K as O,G as f,H as N}from"./vendor-D6jaF0sv.js";const te={class:"drawer-shell"},se={class:"drawer-header"},le={key:1,class:"drawer-content tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},ae={class:"detail-section first-row-section"},ie={class:"section-card"},oe={class:"section-card__body"},de={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},re={class:"detail-value"},ne={class:"detail-value"},ce={class:"detail-value"},ue={class:"tw-mt-1"},ve={class:"ip-category-description"},_e={class:"tw-mt-1"},ge={key:0},pe={class:"gclid-param-row"},ye={class:"gclid-preview"},me={class:"detail-section first-row-section"},we={class:"section-card"},fe={class:"section-card__body"},ke={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},be={class:"detail-value tw-flex tw-items-center tw-gap-2"},Ce=["src","alt"],he={class:"detail-label"},Pe={class:"detail-value"},xe={class:"detail-section xl:tw-col-span-2"},Le={class:"section-card"},Ne={class:"section-card__body section-body--stack"},Se={class:"detail-value tw-break-all"},De={class:"tw-mt-2"},Ie={key:0,class:"url-params-inline"},Ve={class:"url-param-key"},Ge={key:0,class:"gclid-param-row"},Ae={class:"gclid-preview"},Be={key:1,class:"url-param-value"},Ue={key:1,class:"tw-text-sm tw-text-slate-500"},Oe={class:"detail-section xl:tw-col-span-2"},$e={class:"section-card"},Ee={class:"section-card__body"},Fe={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-4"},Re={class:"detail-value"},Te={class:"detail-value"},ze={class:"tw-mt-1"},Qe={class:"ip-category-description"},qe={class:"detail-value"},je={class:"detail-value"},Me={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3 tw-mt-4"},He={class:"detail-label"},Je={class:"detail-value"},Ke={__name:"PageviewDetailDrawer",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(k,{emit:$}){const E={name:"Não determinado",color_hex:"#FCE7F3",description:"Categoria ainda não determinada."},n=k,F=$,_=Y(),g=i({get:()=>n.modelValue,set:s=>F("update:modelValue",s)}),R=i(()=>_.screen.lt.lg?_.screen.width:Math.round(_.screen.width*.8)),c=i(()=>n.payload?.pageview??{}),b=i(()=>n.payload?.url??{full:null,origin:null,path:null,query_params:{}}),m=i(()=>n.payload?.geo??{}),r=i(()=>n.payload?.network??{}),S=i(()=>{const s=b.value?.query_params??{};return Object.entries(s)}),T=i(()=>S.value.length>0),z=i(()=>c.value?.campaign?.name??"-"),Q=i(()=>r.value?.flags??{}),C=i(()=>c.value?.ip_category??E),h=i(()=>r.value?.ip_category??null),q=i(()=>h.value?.color_hex??"#475569"),j=i(()=>h.value?.name??"-"),M=i(()=>h.value?.description??"Sem descrição."),H=i(()=>J(b.value?.full||"")),P=i(()=>W()),D=i(()=>{const s=m.value?.country_code;return s?`${n.assetBaseUrl}/assets/country-flags/${String(s).toLowerCase()}.svg`:null});function J(s){if(!s)return"-";try{const t=typeof window<"u"?window.location.origin:"https://placeholder.local",l=new URL(s,t);return`${l.origin}${l.pathname}`}catch{return s.split("?")[0]??s}}function K(s){return s==null?"-":s?"Sim":"Não"}function w(s){if(s==null)return"-";if(Array.isArray(s)||typeof s=="object")try{return JSON.stringify(s)}catch{return String(s)}return String(s)}function I(s){return s!=null&&String(s).trim()!==""}function V(s){return String(s||"").toLowerCase()==="gclid"}function W(){const s=c.value?.gclid;if(I(s))return String(s);const t=b.value?.query_params??{},l=Object.entries(t).find(([u])=>V(u));return l?w(l[1]):""}async function G(s){const t=w(s);try{await navigator.clipboard.writeText(t),_.notify({type:"positive",message:"GCLID copiado."})}catch{_.notify({type:"negative",message:"Nao foi possivel copiar."})}}return(s,t)=>(o(),d(f,null,[g.value?(o(),d("div",{key:0,class:"detail-drawer-backdrop",onClick:t[0]||(t[0]=l=>g.value=!1)})):p("",!0),v(X,{modelValue:g.value,"onUpdate:modelValue":t[3]||(t[3]=l=>g.value=l),side:"right",overlay:"",bordered:"",width:R.value,class:"pageview-detail-drawer"},{default:y(()=>[e("div",te,[e("div",se,[v(x,{icon:"close",flat:"",round:"",dense:"",onClick:t[1]||(t[1]=l=>g.value=!1)})]),k.loading?(o(),L(Z,{key:0,indeterminate:"",color:"primary"})):p("",!0),k.loading?p("",!0):(o(),d("div",le,[e("section",ae,[e("div",ie,[t[11]||(t[11]=e("div",{class:"section-card__header"},"VISITA",-1)),e("div",oe,[e("div",de,[e("div",null,[t[4]||(t[4]=e("div",{class:"detail-label"},"Data/Horário",-1)),e("div",re,a(c.value.created_at_formatted),1)]),e("div",null,[t[5]||(t[5]=e("div",{class:"detail-label"},"Campanha",-1)),e("div",ne,a(z.value),1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"detail-label"},"IP",-1)),e("div",ce,a(c.value.ip||"-"),1)]),e("div",null,[t[7]||(t[7]=e("div",{class:"detail-label"},"Categoria de IP",-1)),e("div",ue,[e("div",{class:"ip-category-label",style:U({color:C.value.color_hex})},a(C.value.name),5),e("div",ve,a(C.value.description||"Sem descrição."),1)])]),e("div",null,[t[8]||(t[8]=e("div",{class:"detail-label"},"Conversão",-1)),e("div",_e,[c.value.conversion?(o(),L(A,{key:0,color:"green",label:"Convertido"})):(o(),L(A,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])]),I(P.value)?(o(),d("div",ge,[t[10]||(t[10]=e("div",{class:"detail-label"},"GCLID",-1)),e("div",pe,[e("div",ye,a(P.value),1),v(x,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:t[2]||(t[2]=l=>G(P.value))},{default:y(()=>[v(B,null,{default:y(()=>[...t[9]||(t[9]=[O("Copiar GCLID",-1)])]),_:1})]),_:1})])])):p("",!0)])])])]),e("section",me,[e("div",we,[t[13]||(t[13]=e("div",{class:"section-card__header"},"GEOLOCALIZAÇÃO",-1)),e("div",fe,[e("div",ke,[e("div",null,[t[12]||(t[12]=e("div",{class:"detail-label"},"País",-1)),e("div",be,[D.value?(o(),d("img",{key:0,src:D.value,alt:m.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,Ce)):p("",!0),e("span",null,a(m.value.country_name??"-"),1)])]),(o(),d(f,null,N([{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],l=>e("div",{key:l.key},[e("div",he,a(l.label),1),e("div",Pe,a(m.value[l.key]??"-"),1)])),64))])])])]),e("section",xe,[e("div",Le,[t[17]||(t[17]=e("div",{class:"section-card__header"},"ORIGEM DA URL",-1)),e("div",Ne,[e("div",null,[t[14]||(t[14]=e("div",{class:"detail-label"},"Página (sem parâmetros)",-1)),e("div",Se,a(H.value),1)]),e("div",null,[t[16]||(t[16]=e("div",{class:"detail-label"},"Parâmetros",-1)),e("div",De,[T.value?(o(),d("div",Ie,[(o(!0),d(f,null,N(S.value,([l,u])=>(o(),d("div",{key:`${l}-${u}`,class:"url-param-chip"},[e("div",Ve,a(l),1),V(l)?(o(),d("div",Ge,[e("div",Ae,a(w(u)),1),v(x,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:We=>G(u)},{default:y(()=>[v(B,null,{default:y(()=>[...t[15]||(t[15]=[O("Copiar GCLID",-1)])]),_:1})]),_:1},8,["onClick"])])):(o(),d("div",Be,a(w(u)),1))]))),128))])):(o(),d("div",Ue,"Sem parâmetros na URL."))])])])])]),e("section",Oe,[e("div",$e,[t[23]||(t[23]=e("div",{class:"section-card__header"},"REDE & SEGURANÇA",-1)),e("div",Ee,[e("div",Fe,[e("div",null,[t[18]||(t[18]=e("div",{class:"detail-label"},"ISP",-1)),e("div",Re,a(r.value.isp||"-"),1)]),e("div",null,[t[19]||(t[19]=e("div",{class:"detail-label"},"Organização",-1)),e("div",Te,a(r.value.organization||"-"),1)]),e("div",null,[t[20]||(t[20]=e("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),e("div",ze,[e("div",{class:"ip-category-label",style:U({color:q.value})},a(j.value),5),e("div",Qe,a(M.value),1)])]),e("div",null,[t[21]||(t[21]=e("div",{class:"detail-label"},"Fraud Score",-1)),e("div",qe,a(r.value.fraud_score??"-"),1)]),e("div",null,[t[22]||(t[22]=e("div",{class:"detail-label"},"Última verificação",-1)),e("div",je,a(r.value.last_checked_formatted??r.value.last_checked??"-"),1)])]),e("div",Me,[(o(),d(f,null,N([{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],l=>e("div",{key:l.key},[e("div",He,a(l.label),1),e("div",Je,a(K(Q.value[l.key])),1)])),64))])])])])]))])]),_:1},8,["modelValue","width"])],64))}},et=ee(Ke,[["__scopeId","data-v-22296968"]]);export{et as default};
