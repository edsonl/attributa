import{s as k,y as C,x as c,E as Q,I as U,c as b,h as f,r as j}from"./vendor-quasar-C1KtC9YM.js";import{_ as S,r as v,e as F,f as B,G as _,H as m,Q as i,E as a,D as u,u as r,N as E,$ as I,C as p,L as N,S as O}from"./vendor-D8nj3W7R.js";const D={class:"tw-flex tw-justify-center tw-mt-8"},L={class:"tw-w-full md:tw-max-w-xl lg:tw-max-w-2xl"},M={class:"tw-text-lg tw-font-semibold tw-mb-2"},R={class:"tw-grid md:tw-grid-cols-2 tw-gap-4"},$={class:"tw-grid md:tw-grid-cols-2 tw-gap-4"},q={class:"tw-flex tw-items-center tw-gap-4"},z={class:"tw-grid md:tw-grid-cols-2 tw-gap-4"},G={class:"tw-relative tw-w-[100px] tw-h-[100px] tw-rounded tw-overflow-hidden tw-bg-gray-100 tw-flex tw-items-center tw-justify-center"},H=["src"],T={class:"tw-flex tw-gap-2 tw-items-center tw-justify-between"},J={__name:"ClientForm",props:{mode:{type:String,default:"create"},endpoint:{type:String,required:!0},defaults:{type:Object,default:()=>({visible:!0,order:0,image_max_width:300,image_max_height:300})},entity:{type:Object,default:null},errors:{type:Object,default:()=>({})}},setup(s){const t=s,e=S({name:"",website:"",order:0,visible:!0,image:null,image_max_width:300,image_max_height:300,remove_image:!1}),d=v(null),n=v(null),w=v(!1);F(()=>{t.mode==="edit"&&t.entity?(e.name=t.entity.name,e.website=t.entity.website,e.order=t.entity.order,e.visible=!!t.entity.visible,e.image_max_width=t.defaults?.image_max_width??300,e.image_max_height=t.defaults?.image_max_height??300,t.entity.image_url&&(n.value=t.entity.image_url,w.value=!0)):t.defaults&&(e.visible=!!t.defaults.visible,e.order=t.defaults.order??0,e.image_max_width=t.defaults.image_max_width??300,e.image_max_height=t.defaults.image_max_height??300)});function h(){d.value&&d.value instanceof File&&(e.image=d.value,n.value=URL.createObjectURL(d.value),w.value=!0)}function y(){d.value=null,e.image=null,e.remove_image=!0,t.entity?.image_url&&(n.value=null)}function x(){t.mode==="edit"?e.transform(g=>({...g,forceFormData:!0,_method:"put"})).post(t.endpoint):e.post(t.endpoint,{forceFormData:!0})}const V=B(()=>t.mode==="edit");return(g,l)=>(m(),_("div",D,[i("div",L,[a(r(j),{flat:"",bordered:""},{default:u(()=>[a(r(k),null,{default:u(()=>[i("div",M,E(V.value?"Editar cliente":"Cadastrar cliente"),1),a(C,{onSubmit:I(x,["prevent"]),class:"tw-grid tw-gap-4"},{default:u(()=>[i("div",R,[a(c,{modelValue:r(e).name,"onUpdate:modelValue":l[0]||(l[0]=o=>r(e).name=o),label:"Nome",outlined:"",dense:"",error:!!s.errors.name,"error-message":s.errors.name},null,8,["modelValue","error","error-message"]),a(c,{modelValue:r(e).website,"onUpdate:modelValue":l[1]||(l[1]=o=>r(e).website=o),label:"Website (URL)",type:"url",outlined:"",dense:"",error:!!s.errors.website,"error-message":s.errors.website},null,8,["modelValue","error","error-message"])]),i("div",$,[a(c,{modelValue:r(e).order,"onUpdate:modelValue":l[2]||(l[2]=o=>r(e).order=o),modelModifiers:{number:!0},label:"Ordem",type:"number",outlined:"",dense:"",error:!!s.errors.order,"error-message":s.errors.order},null,8,["modelValue","error","error-message"]),i("div",q,[a(Q,{modelValue:r(e).visible,"onUpdate:modelValue":l[3]||(l[3]=o=>r(e).visible=o),label:"VisÃ­vel no site","left-label":""},null,8,["modelValue"])])]),i("div",z,[a(U,{color:"secondary",modelValue:d.value,"onUpdate:modelValue":[l[4]||(l[4]=o=>d.value=o),h],label:"Imagem",outlined:"",dense:""},{prepend:u(()=>[a(b,{name:"cloud_upload"})]),_:1},8,["modelValue"]),i("div",G,[n.value?(m(),_("img",{key:0,src:n.value,class:"tw-w-full tw-h-full tw-object-cover",alt:"thumb"},null,8,H)):(m(),p(b,{key:1,name:"image"})),n.value&&w.value?(m(),p(f,{key:2,round:"",dense:"",size:"sm",color:"negative",icon:"close",class:"tw-absolute tw-top-1 tw-right-1 tw-backdrop-blur",onClick:y})):N("",!0)])]),i("div",T,[a(f,{flat:"",color:"grey",onClick:l[5]||(l[5]=o=>r(O).visit(g.route("panel.clients.index"))),label:"Voltar"}),a(f,{type:"submit",color:"positive",label:"Salvar",unelevated:""})])]),_:1})]),_:1})]),_:1})])]))}};export{J as default};
