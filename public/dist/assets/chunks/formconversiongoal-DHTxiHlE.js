import{u as _,x as C,E as V,F as h,h as d}from"./vendor-quasar-C0Sd45BE.js";import{f as w,r as F,Y as G,E as S,F as y,C as s,O as B,u as t,Q,Z as k}from"./vendor-D6jaF0sv.js";const A={class:"tw-flex tw-justify-end tw-gap-2"},x={__name:"FormConversionGoal",props:{conversionGoal:{type:Object,default:null},timezones:{type:Array,default:()=>[]}},setup(c){const r=c,m=w(()=>!!r.conversionGoal),p=_(),i=F(r.timezones),o=G({goal_code:r.conversionGoal?.goal_code??"",timezone_id:r.conversionGoal?.timezone_id??null,active:r.conversionGoal?.active??!0});function u(n){return String(n??"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase()}function f(n){const a=String(n??""),e=/\s/.test(a),l=/[^\u0000-\u007F]/.test(a),z=/[^A-Za-z0-9_-]/.test(a);return e||l||z}function g(){return new Promise(n=>{p.dialog({title:"Atenção",message:"Não é recomendado usar espaços, acentos ou caracteres especiais no código da meta de conversão. Deseja continuar mesmo assim?",ok:{label:"Continuar",color:"warning",unelevated:!0},cancel:{label:"Cancelar",flat:!0},persistent:!0}).onOk(()=>n(!0)).onCancel(()=>n(!1)).onDismiss(()=>n(!1))})}async function v(){if(o.goal_code=String(o.goal_code??"").trim(),!(f(o.goal_code)&&!await g())){if(m.value){o.put(route("panel.conversion-goals.update",r.conversionGoal.hashid??r.conversionGoal.id));return}o.post(route("panel.conversion-goals.store"))}}function b(n,a){a(()=>{const e=u(String(n??"").trim());if(e===""){i.value=r.timezones;return}i.value=r.timezones.filter(l=>u(l?.label??"").includes(e)||u(l?.identifier??"").includes(e))})}return(n,a)=>(y(),S("form",{onSubmit:k(v,["prevent"]),class:"tw-space-y-2 tw-pt-4"},[s(C,{modelValue:t(o).goal_code,"onUpdate:modelValue":a[0]||(a[0]=e=>t(o).goal_code=e),label:"Codigo da meta de conversao",outlined:"",dense:"",error:!!t(o).errors.goal_code,"error-message":t(o).errors.goal_code},null,8,["modelValue","error","error-message"]),s(V,{modelValue:t(o).timezone_id,"onUpdate:modelValue":a[1]||(a[1]=e=>t(o).timezone_id=e),options:i.value,"option-value":"id","option-label":e=>e?.label??e?.identifier??`ID ${e?.id??""}`,"emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:b,label:"Timezone",outlined:"",dense:"",clearable:!1,error:!!t(o).errors.timezone_id,"error-message":t(o).errors.timezone_id,hint:"Deve corresponder ao fuso horario configurado na sua conta do Google Ads."},null,8,["modelValue","options","option-label","error","error-message"]),s(h,{modelValue:t(o).active,"onUpdate:modelValue":a[2]||(a[2]=e=>t(o).active=e),label:"Meta ativa","true-value":!0,"false-value":!1},null,8,["modelValue"]),B("div",A,[s(d,{flat:"",label:"Cancelar",onClick:a[3]||(a[3]=e=>t(Q).visit(n.route("panel.conversion-goals.index")))}),s(d,{color:"primary",label:"Salvar",type:"submit"})])],32))}};export{x as default};
