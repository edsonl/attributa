import{H as B,h as p,s as A,x as I,c as O,A as R,B as b,r as $}from"./vendor-quasar-D0sfcEux.js";import{f as h,A as N,F as g,B as n,K as Q,L as S,r as C,w as x,E as k,C as t,O as u,u as r,N as z,P as D,_ as F,G as P,H as K,Q as _}from"./vendor-D6jaF0sv.js";import{q as c}from"./qtable-pt-CkdICETI.js";const L={__name:"StatusChip",props:{value:{type:[Boolean,Number],required:!0}},setup(f){const s=f,m=h(()=>s.value?"Ativo":"Inativo"),o=h(()=>s.value?"positive":"negative");return(a,y)=>(g(),N(B,{dense:"",color:o.value,"text-color":"white"},{default:n(()=>[Q(S(m.value),1)]),_:1},8,["color"]))}},E={class:"tw-space-y-3"},H={class:"tw-flex tw-items-center tw-justify-between tw-flex-col sm:tw-flex-row tw-gap-3"},U={class:"tw-flex tw-gap-3 tw-flex-col md:tw-flex-row"},G={class:"tw-flex tw-flex-wrap tw-gap-1"},X={__name:"Index",props:{campaigns:{type:Object,required:!0},filters:{type:Object,default:()=>({})}},setup(f){const s=f,m=h(()=>s.campaigns?.data??[]),o=C(s.filters?.search??""),a=C({page:s.campaigns?.current_page??1,rowsPerPage:s.campaigns?.per_page??15,rowsNumber:s.campaigns?.total??0,sortBy:s.filters?.sort??"created_at",descending:(s.filters?.direction??"desc")==="desc"});x(()=>s.campaigns,e=>{e&&(a.value.page=e.current_page,a.value.rowsPerPage=e.per_page,a.value.rowsNumber=e.total)}),x(()=>s.filters,e=>{a.value.sortBy=e?.sort??"created_at",a.value.descending=(e?.direction??"desc")==="desc",(e?.search??"")!==o.value&&(o.value=e?.search??"")});const y=[{name:"code",label:"Código",field:"code",align:"left",sortable:!0},{name:"name",label:"Nome",field:"name",align:"left",sortable:!0},{name:"channel",label:"Canal",field:e=>e.channel?.name??"-",align:"left"},{name:"conversion_goal",label:"Meta de conversao",field:e=>e.conversion_goal?.goal_code??"-",align:"left"},{name:"countries",label:"Países",field:"countries",align:"left"},{name:"status",label:"Status",field:"status",align:"center",sortable:!0},{name:"actions",label:"Ações",field:"actions",align:"right"}];function w(){const e={page:a.value.page,per_page:a.value.rowsPerPage,sort:a.value.sortBy,direction:a.value.descending?"desc":"asc",search:o.value||void 0};_.get(route("panel.campaigns.index"),e,{preserveState:!0,preserveScroll:!0,replace:!0})}function q({pagination:e}){Object.assign(a.value,e),w()}function v(){a.value.page=1,w()}function V(){o.value!==""&&(o.value="",a.value.page=1,w())}function j(e){_.visit(route("panel.campaigns.edit",e))}function T(e){confirm(`Deseja realmente remover a campanha "${e.name}"?`)&&_.delete(route("panel.campaigns.destroy",e.id))}return(e,i)=>(g(),k(P,null,[t(r(z),{title:"Campanhas"}),u("div",E,[u("div",H,[i[2]||(i[2]=u("h1",{class:"tw-text-lg tw-font-semibold"}," Campanhas ",-1)),t(r(D),{href:e.route("panel.campaigns.create")},{default:n(()=>[t(p,{color:"positive",icon:"add",label:"Nova Campanha",unelevated:""})]),_:1},8,["href"])]),t($,{flat:"",bordered:""},{default:n(()=>[t(A,{class:"tw-space-y-3"},{default:n(()=>[u("div",U,[t(I,{modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=l=>o.value=l),dense:"",outlined:"",clearable:"",placeholder:"Pesquisar por código ou nome",class:"md:tw-flex-1",onKeyup:F(v,["enter"]),onClear:V},{append:n(()=>[t(O,{name:"search",class:"cursor-pointer",onClick:v})]),_:1},8,["modelValue"]),t(p,{outline:"",color:"primary",icon:"search",label:"Filtrar",class:"md:tw-w-auto",onClick:v})]),t(R,{flat:"",rows:m.value,columns:y,"row-key":"id","binary-state-sort":"",pagination:a.value,"onUpdate:pagination":i[1]||(i[1]=l=>a.value=l),"rows-per-page-options":[10,15,25,50],"no-data-label":r(c).noData,"no-results-label":r(c).noResults,"loading-label":r(c).loading,"rows-per-page-label":r(c).recordsPerPage,"all-rows-label":r(c).allRows,"pagination-label":r(c).pagination,onRequest:q},{"body-cell-countries":n(l=>[t(b,{props:l},{default:n(()=>[u("div",G,[(g(!0),k(P,null,K(l.row.countries,d=>(g(),N(B,{key:d.id,dense:"",size:"sm"},{default:n(()=>[Q(S(d.iso2),1)]),_:2},1024))),128))])]),_:2},1032,["props"])]),"body-cell-status":n(l=>[t(b,{props:l,class:"tw-text-center"},{default:n(()=>[t(L,{value:l.row.status},null,8,["value"])]),_:2},1032,["props"])]),"body-cell-actions":n(l=>[t(b,{props:l,class:"tw-text-right"},{default:n(()=>[t(p,{flat:"",dense:"",size:"sm",icon:"edit",color:"primary",onClick:d=>j(l.row.id)},null,8,["onClick"]),t(p,{flat:"",dense:"",size:"sm",icon:"delete",color:"negative",onClick:d=>T(l.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","no-data-label","no-results-label","loading-label","rows-per-page-label","all-rows-label","pagination-label"])]),_:1})]),_:1})])],64))}};export{X as default};
