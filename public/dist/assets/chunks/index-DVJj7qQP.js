import{h as c,x as D,c as x,A as j,B as w,k as q,r as E}from"./vendor-quasar-CQUzQrOh.js";import{B as T,f as d,r as v,w as P,G as C,H as p,E as l,Q as g,u as o,P as L,D as r,C as B,L as $,R as N,a0 as O,M as U,N as A,I as K,S as _}from"./vendor-D8nj3W7R.js";import{q as n}from"./qtable-pt-CkdICETI.js";const F={class:"tw-space-y-3"},G={class:"tw-flex tw-items-center tw-gap-3 tw-mb-3"},H={class:"tw-flex tw-items-center tw-gap-2"},M={class:"tw-w-[100px] tw-h-[100px] tw-rounded tw-overflow-hidden tw-bg-gray-100 tw-flex tw-items-center tw-justify-center"},z=["src"],ee={__name:"Index",setup(J){const h=T(),i=d(()=>h.props.items),m=d(()=>h.props.filters),R=d(()=>i.value?.data??[]),t=v({page:i.value?.current_page??1,rowsPerPage:i.value?.per_page??10,rowsNumber:i.value?.total??0,sortBy:m.value?.sort??"id",descending:(m.value?.direction??"desc")==="desc"}),b=v(m.value?.search??""),u=v([]),f=d(()=>u.value.map(e=>e.id));P(()=>i.value,e=>{t.value.page=e?.current_page??1,t.value.rowsPerPage=e?.per_page??10,t.value.rowsNumber=e?.total??0}),P(()=>i.value,e=>{e&&Object.assign(t.value,{page:e.current_page,rowsPerPage:e.per_page,rowsNumber:e.total})});function k(){const e={page:t.value.page,per_page:t.value.rowsPerPage,sort:t.value.sortBy,direction:t.value.descending?"desc":"asc",search:b.value||void 0};_.get(route("panel.clients.index"),e,{preserveScroll:!0,preserveState:!0,replace:!0})}function S({pagination:e}){Object.assign(t.value,e),k()}function y(){t.value.page=1,k()}async function I(e){!e||!await $confirm({title:"Remover cliente",message:"Esta ação é permanente. Deseja realmente remover?",okLabel:"Remover",okColor:"negative"})||_.delete(route("panel.clients.destroy",e),{preserveScroll:!0})}async function Q(){f.value.length===0||!await $confirm({title:"Excluir selecionados",message:`Remover ${f.value.length} registro(s)?`,okLabel:"Remover",okColor:"negative"})||_.delete(route("panel.clients.bulk-delete"),{data:{ids:f.value},preserveScroll:!0,onSuccess:()=>{u.value=[]}})}const V=[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"image_url",label:"Imagem",field:"image_url",align:"center",sortable:!1},{name:"name",label:"Nome",field:"name",align:"left",sortable:!0},{name:"order",label:"Ordem",field:"order",align:"left",sortable:!0},{name:"website",label:"Site",field:"website",align:"left",sortable:!0},{name:"visible_label",label:"Visível",field:"visible_label",align:"center",sortable:!0},{name:"created_at",label:"Criado em",field:"created_at",align:"left",sortable:!0},{name:"actions",label:"Ações",field:"actions",align:"right"}];return(e,s)=>(p(),C(K,null,[l(o(L),{title:"Clientes"}),g("div",F,[l(E,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:r(()=>[g("div",G,[g("div",H,[l(o(N),{href:e.route("panel.clients.create")},{default:r(()=>[l(c,{color:"positive",unelevated:"",icon:"add",label:"Novo Cliente"})]),_:1},8,["href"]),u.value.length>0?(p(),B(c,{key:0,color:"negative",unelevated:"",icon:"delete",label:"Excluir",onClick:Q})):$("",!0)]),l(D,{modelValue:b.value,"onUpdate:modelValue":s[0]||(s[0]=a=>b.value=a),dense:"",outlined:"",clearable:"",placeholder:"Pesquisar por nome ou e-mail",class:"tw-ml-auto tw-w-full md:tw-w-1/3",onKeyup:O(y,["enter"])},{append:r(()=>[l(x,{name:"search",class:"cursor-pointer",onClick:y})]),_:1},8,["modelValue"])]),l(j,{flat:"",bordered:"","row-key":"id",rows:R.value,columns:V,pagination:t.value,"onUpdate:pagination":s[1]||(s[1]=a=>t.value=a),"rows-per-page-options":[5,10,15,25,50],selection:"multiple",selected:u.value,"onUpdate:selected":s[2]||(s[2]=a=>u.value=a),"binary-state-sort":"","no-data-label":o(n).noData,"no-results-label":o(n).noResults,"loading-label":o(n).loading,"rows-per-page-label":o(n).recordsPerPage,"all-rows-label":o(n).allRows,"pagination-label":o(n).pagination,"selected-rows-label":o(n).selectedRecords,onRequest:S},{"body-cell-visible_label":r(a=>[l(w,{props:a},{default:r(()=>[l(q,{color:a.row.visible?"green":"grey",outline:""},{default:r(()=>[U(A(a.row.visible_label),1)]),_:2},1032,["color"])]),_:2},1032,["props"])]),"body-cell-image_url":r(a=>[l(w,{props:a},{default:r(()=>[g("div",M,[a.row.image_url?(p(),C("img",{key:0,src:a.row.image_url,alt:"thumb",class:"tw-w-full tw-h-full tw-object-cover"},null,8,z)):(p(),B(x,{key:1,name:"image"}))])]),_:2},1032,["props"])]),"body-cell-actions":r(a=>[l(w,{props:a,class:"tw-text-right"},{default:r(()=>[l(o(N),{href:e.route("panel.clients.edit",a.row.id)},{default:r(()=>[l(c,{dense:"",flat:"",icon:"edit"})]),_:1},8,["href"]),l(c,{dense:"",flat:"",icon:"delete",color:"negative",onClick:W=>I(a.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","pagination","selected","no-data-label","no-results-label","loading-label","rows-per-page-label","all-rows-label","pagination-label","selected-rows-label"])]),_:1})])],64))}};export{ee as default};
