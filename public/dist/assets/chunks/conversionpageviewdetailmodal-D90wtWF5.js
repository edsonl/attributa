import{u as me,r as fe,s as F,h as g,C as pe,n as b,k as M,v as _e}from"./vendor-quasar-D0sfcEux.js";import{_ as ge}from"../app-DmBoKc2c.js";import{f as o,A as c,F as n,B as r,C as v,J as m,O as t,L as i,K as k,E as y,G as D,H as O,M as ye}from"./vendor-D6jaF0sv.js";const we={class:"detail-section first-row-section"},be={class:"section-card"},ke={class:"section-card__body"},Ce={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},he={class:"detail-value"},Se={class:"detail-value"},Ne={class:"value-with-copy value-with-copy--inline"},Re={class:"detail-value"},Le={class:"value-with-copy value-with-copy--inline"},Ve={class:"truncated-preview"},$e={class:"value-with-copy value-with-copy--inline"},xe={class:"truncated-preview"},ze={class:"tw-mt-1"},Ie={class:"detail-value"},Pe={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},De={class:"detail-value tw-flex tw-items-center tw-gap-2"},Oe=["src","alt"],Te={class:"detail-label"},Ee={class:"detail-value"},Ue={class:"detail-section first-row-section"},Be={class:"section-card"},Ae={class:"section-card__body"},Ge={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Fe={class:"detail-value"},Me={class:"detail-value"},Qe={class:"detail-value"},qe={class:"detail-value"},We={class:"detail-value"},je={class:"detail-value"},He={class:"detail-value"},Je={class:"detail-value"},Ke={class:"detail-value"},Ze={class:"detail-value"},Xe={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-4"},Ye={class:"detail-value"},et={class:"detail-value"},tt={class:"tw-mt-1"},lt={class:"ip-category-description"},st={class:"detail-value"},it={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3 tw-mt-4"},at={class:"detail-label"},ot={class:"detail-value"},nt={class:"detail-section xl:tw-col-span-2"},rt={class:"section-card"},dt={class:"section-card__body section-body--compact"},ut={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3"},ct={class:"detail-value"},vt={class:"detail-value"},mt={class:"detail-value"},ft={class:"value-with-copy"},pt={class:"detail-value tw-break-all"},_t={class:"lg:tw-col-span-2"},gt={class:"value-with-copy"},yt={class:"detail-value tw-break-all"},wt={class:"lg:tw-col-span-2"},bt={class:"detail-value tw-break-all"},kt={class:"lg:tw-col-span-4"},Ct={key:0,class:"url-params-inline"},ht={class:"url-param-key"},St={class:"value-with-copy value-with-copy--inline"},Nt={class:"truncated-preview"},Rt={key:1,class:"traffic-empty"},Q=20,Lt={__name:"ConversionPageviewDetailModal",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(N,{emit:q}){const W=[{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],j=[{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],f=N,H=q,T=me(),R=o({get:()=>f.modelValue,set:l=>H("update:modelValue",l)}),a=o(()=>f.payload?.pageview??{}),L=o(()=>f.payload?.url??{full:null,origin:null,path:null,query_params:{}}),h=o(()=>f.payload?.geo??{}),C=o(()=>f.payload?.network??{}),J=o(()=>a.value?.campaign?.name??"-"),K=o(()=>C.value?.flags??{}),V=o(()=>C.value?.ip_category??null),Z=o(()=>V.value?.color_hex??"#475569"),X=o(()=>V.value?.name??"-"),Y=o(()=>V.value?.description??"Sem descrição."),ee=o(()=>a.value?.traffic_source_category??null),E=o(()=>ee.value?.name??"Não classificado"),te=o(()=>ve(a.value?.traffic_source_reason)),U=o(()=>{const l=h.value?.country_code;return l?`${f.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null}),le=o(()=>A(L.value?.full||"")),$=o(()=>a.value?.landing_url??null),se=o(()=>A($.value||"")),S=o(()=>a.value?.referrer??null),ie=o(()=>de(S.value)),x=o(()=>ce()),z=o(()=>f.payload?.composed_code??null),B=o(()=>{const l=L.value?.query_params??{};return Object.entries(l)}),ae=o(()=>B.value.length>0),oe=o(()=>{const l=a.value?.device_category?.name,e=a.value?.device_type,s=_(l);return s!=="-"?s:_(e)}),ne=o(()=>{const l=a.value?.browser?.name,e=a.value?.browser_name,s=a.value?.browser_version,d=_(e),P=_(s),G=_(l);return d!=="-"&&P!=="-"?`${d} ${P}`:d!=="-"?d:G!=="-"?G:"-"}),re=o(()=>{const l=a.value?.os_name,e=a.value?.os_version,s=_(l),d=_(e);return s!=="-"&&d!=="-"?`${s} ${d}`:s!=="-"?s:"-"});function A(l){if(!l)return"-";try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local",s=new URL(l,e);return`${s.origin}${s.pathname}`}catch{return l.split("?")[0]??l}}function de(l){if(!l)return null;try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local";return new URL(l,e).host||null}catch{return null}}function p(l){return l!=null&&String(l).trim()!==""}function _(l){const e=String(l??"").trim();if(!e)return"-";const s=e.toLowerCase();return s==="-"||s==="unknown"||s==="desconhecido"||s==="unk"?"-":e}function ue(l){return l==null?"-":l?"Sim":"Não"}function u(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}function I(l){const e=u(l);return!p(e)||e==="-"?"-":e.length<=Q?e:e.slice(0,Q)}function ce(){const l=a.value?.gclid;if(p(l))return String(l);const e=L.value?.query_params??{},s=Object.entries(e).find(([d])=>String(d).toLowerCase()==="gclid");return s?u(s[1]):""}function ve(l){const e=String(l||"").trim();return e?e.startsWith("click_id:")?`Clique identificado por ${e.slice(9)}`:e.startsWith("utm_medium:")?`Classificado por utm_medium=${e.slice(11)}`:e.startsWith("referrer_search:")?`Referência de buscador (${e.slice(16)})`:e.startsWith("referrer_social:")?`Referência de rede social (${e.slice(16)})`:e.startsWith("referrer:")?`Referência externa (${e.slice(9)})`:e==="internal_referrer"?"Navegação interna no mesmo domínio":e.startsWith("utm_source_only:")?`Somente utm_source informado (${e.slice(16)})`:e==="no_referrer_no_utm_no_click_id"?"Sem referrer, UTM ou click-id (direto)":e:"-"}async function w(l){const e=u(l);try{await navigator.clipboard.writeText(e),T.notify({type:"positive",message:"Valor copiado."})}catch{T.notify({type:"negative",message:"Nao foi possivel copiar."})}}return(l,e)=>(n(),c(_e,{modelValue:R.value,"onUpdate:modelValue":e[6]||(e[6]=s=>R.value=s),"transition-show":"scale","transition-hide":"scale"},{default:r(()=>[v(fe,{class:"pageview-detail-card"},{default:r(()=>[v(F,{class:"tw-flex tw-justify-end"},{default:r(()=>[v(g,{icon:"close",flat:"",round:"",dense:"",onClick:e[0]||(e[0]=s=>R.value=!1)})]),_:1}),N.loading?(n(),c(pe,{key:0,indeterminate:"",color:"primary"})):m("",!0),N.loading?m("",!0):(n(),c(F,{key:1,class:"tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},{default:r(()=>[t("section",we,[t("div",be,[e[20]||(e[20]=t("div",{class:"section-card__header"},"VISITA",-1)),t("div",ke,[t("div",Ce,[t("div",null,[e[7]||(e[7]=t("div",{class:"detail-label"},"Data/Horário",-1)),t("div",he,i(a.value.created_at_formatted),1)]),t("div",null,[e[8]||(e[8]=t("div",{class:"detail-label"},"Campanha",-1)),t("div",Se,i(J.value),1)]),t("div",null,[e[10]||(e[10]=t("div",{class:"detail-label"},"IP",-1)),t("div",Ne,[t("div",Re,i(a.value.ip||"-"),1),p(a.value.ip)?(n(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[1]||(e[1]=s=>w(a.value.ip))},{default:r(()=>[v(b,null,{default:r(()=>[...e[9]||(e[9]=[k("Copiar IP",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",null,[e[13]||(e[13]=t("div",{class:"detail-label"},"GCLID",-1)),t("div",Le,[t("div",Ve,i(I(x.value)),1),p(x.value)?(n(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[2]||(e[2]=s=>w(x.value))},{default:r(()=>[v(b,null,{default:r(()=>[...e[11]||(e[11]=[k("Copiar GCLID",-1)])]),_:1})]),_:1})):m("",!0)]),e[14]||(e[14]=t("div",{class:"detail-label tw-mt-2"},"Id de acompanhamento",-1)),t("div",$e,[t("div",xe,i(I(z.value)),1),p(z.value)?(n(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[3]||(e[3]=s=>w(z.value))},{default:r(()=>[v(b,null,{default:r(()=>[...e[12]||(e[12]=[k("Copiar código composto",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",null,[e[15]||(e[15]=t("div",{class:"detail-label"},"Conversão",-1)),t("div",ze,[a.value.conversion?(n(),c(M,{key:0,color:"green",label:"Convertido"})):(n(),c(M,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])]),t("div",null,[e[16]||(e[16]=t("div",{class:"detail-label"},"Canal",-1)),t("div",Ie,i(E.value),1)])]),e[18]||(e[18]=t("div",{class:"subsection-separator"},null,-1)),e[19]||(e[19]=t("div",{class:"subsection-title"},"GEOLOCALIZAÇÃO",-1)),t("div",Pe,[t("div",null,[e[17]||(e[17]=t("div",{class:"detail-label"},"País",-1)),t("div",De,[U.value?(n(),y("img",{key:0,src:U.value,alt:h.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,Oe)):m("",!0),t("span",null,i(h.value.country_name??"-"),1)])]),(n(),y(D,null,O(W,s=>t("div",{key:s.key},[t("div",Te,i(s.label),1),t("div",Ee,i(h.value[s.key]??"-"),1)])),64))])])])]),t("section",Ue,[t("div",Be,[e[37]||(e[37]=t("div",{class:"section-card__header"},"DISPOSITIVO, NAVEGADOR & REDE",-1)),t("div",Ae,[t("div",Ge,[t("div",null,[e[21]||(e[21]=t("div",{class:"detail-label"},"Categoria",-1)),t("div",Fe,i(oe.value),1)]),t("div",null,[e[22]||(e[22]=t("div",{class:"detail-label"},"Marca",-1)),t("div",Me,i(u(a.value.device_brand)),1)]),t("div",null,[e[23]||(e[23]=t("div",{class:"detail-label"},"Modelo",-1)),t("div",Qe,i(u(a.value.device_model)),1)]),t("div",null,[e[24]||(e[24]=t("div",{class:"detail-label"},"Sistema Operacional",-1)),t("div",qe,i(re.value),1)]),t("div",null,[e[25]||(e[25]=t("div",{class:"detail-label"},"Navegador",-1)),t("div",We,i(ne.value),1)]),t("div",null,[e[26]||(e[26]=t("div",{class:"detail-label"},"Idioma",-1)),t("div",je,i(u(a.value.language)),1)]),t("div",null,[e[27]||(e[27]=t("div",{class:"detail-label"},"Plataforma",-1)),t("div",He,i(u(a.value.platform)),1)]),t("div",null,[e[28]||(e[28]=t("div",{class:"detail-label"},"Tela",-1)),t("div",Je,i(u(a.value.screen_width))+" x "+i(u(a.value.screen_height)),1)]),t("div",null,[e[29]||(e[29]=t("div",{class:"detail-label"},"Viewport",-1)),t("div",Ke,i(u(a.value.viewport_width))+" x "+i(u(a.value.viewport_height)),1)]),t("div",null,[e[30]||(e[30]=t("div",{class:"detail-label"},"DPR",-1)),t("div",Ze,i(u(a.value.device_pixel_ratio)),1)])]),e[35]||(e[35]=t("div",{class:"subsection-separator"},null,-1)),e[36]||(e[36]=t("div",{class:"subsection-title"},"INFORMAÇÕES DA REDE",-1)),t("div",Xe,[t("div",null,[e[31]||(e[31]=t("div",{class:"detail-label"},"ISP",-1)),t("div",Ye,i(C.value.isp||"-"),1)]),t("div",null,[e[32]||(e[32]=t("div",{class:"detail-label"},"Organização",-1)),t("div",et,i(C.value.organization||"-"),1)]),t("div",null,[e[33]||(e[33]=t("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),t("div",tt,[t("div",{class:"ip-category-label",style:ye({color:Z.value})},i(X.value),5),t("div",lt,i(Y.value),1)])]),t("div",null,[e[34]||(e[34]=t("div",{class:"detail-label"},"Fraud Score",-1)),t("div",st,i(C.value.fraud_score??"-"),1)])]),t("div",it,[(n(),y(D,null,O(j,s=>t("div",{key:s.key},[t("div",at,i(s.label),1),t("div",ot,i(ue(K.value[s.key])),1)])),64))])])])]),t("section",nt,[t("div",rt,[e[47]||(e[47]=t("div",{class:"section-card__header"},"ORIGEM DO TRÁFEGO",-1)),t("div",dt,[t("div",ut,[t("div",null,[e[38]||(e[38]=t("div",{class:"detail-label"},"Canal",-1)),t("div",ct,i(E.value),1)]),t("div",null,[e[39]||(e[39]=t("div",{class:"detail-label"},"Motivo da classificação",-1)),t("div",vt,i(te.value),1)]),t("div",null,[e[40]||(e[40]=t("div",{class:"detail-label"},"Domínio de referrer",-1)),t("div",mt,i(ie.value||"-"),1)]),t("div",null,[e[42]||(e[42]=t("div",{class:"detail-label"},"Referrer completo",-1)),t("div",ft,[t("div",pt,i(S.value||"-"),1),p(S.value)?(n(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[4]||(e[4]=s=>w(S.value))},{default:r(()=>[v(b,null,{default:r(()=>[...e[41]||(e[41]=[k("Copiar referrer",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",_t,[e[44]||(e[44]=t("div",{class:"detail-label"},"Landing page (sem parâmetros)",-1)),t("div",gt,[t("div",yt,i(se.value),1),p($.value)?(n(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[5]||(e[5]=s=>w($.value))},{default:r(()=>[v(b,null,{default:r(()=>[...e[43]||(e[43]=[k("Copiar landing URL",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",wt,[e[45]||(e[45]=t("div",{class:"detail-label"},"Página atual (sem parâmetros)",-1)),t("div",bt,i(le.value),1)]),t("div",kt,[e[46]||(e[46]=t("div",{class:"detail-label"},"Parâmetros da URL",-1)),ae.value?(n(),y("div",Ct,[(n(!0),y(D,null,O(B.value,([s,d])=>(n(),y("div",{key:`query-${s}-${d}`,class:"url-param-chip"},[t("div",ht,i(s),1),t("div",St,[t("div",Nt,i(I(d)),1),v(g,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:P=>w(d)},{default:r(()=>[v(b,null,{default:r(()=>[k("Copiar "+i(s),1)]),_:2},1024)]),_:2},1032,["onClick"])])]))),128))])):(n(),y("div",Rt,"-"))])])])])])]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}},zt=ge(Lt,[["__scopeId","data-v-0f13c46f"]]);export{zt as default};
