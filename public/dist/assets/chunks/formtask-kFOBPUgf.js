import{s as y,y as k,x as u,C as n,h as v,r as O}from"./vendor-quasar-CQUzQrOh.js";import{B as S,f as s,r as Q,w as U,G as C,H as B,Q as r,E as t,D as i,M as E,N as j,$ as D,u as N,R as I}from"./vendor-D8nj3W7R.js";import T from"./tasknotes-cFH4ENVR.js";const F={class:"tw-flex tw-justify-center tw-py-6"},M={class:"tw-w-full md:tw-w-[760px]"},P={class:"md:tw-grid md:tw-grid-cols-3 tw-grid-cols-1 tw-gap-3"},$={class:"tw-flex tw-justify-between tw-pt-2"},R={__name:"FormTask",props:{mode:{type:String,default:"create"},task:{type:Object,default:()=>({id:null,title:"",description:"",status:"pending",priority:"medium",due_date:"",company_id:null})}},emits:["submit"],setup(p,{emit:_}){const m=p,w=_,d=S(),c=s(()=>d.props.auth?.user?.id??null),b=s(()=>d.props.statusOptions??[]),V=s(()=>d.props.priorityOptions??[]),g=s(()=>d.props.companyOptions??[]),e=Q({title:"",description:"",status:"pending",priority:"medium",due_date:"",assigned_to_id:null,company_id:null}),f=s(()=>m.mode==="edit");U(()=>m.task,o=>{o&&Object.assign(e.value,{title:o?.title??"",description:o?.description??"",status:o?.status??"pending",priority:o?.priority??"medium",due_date:o?.due_date??"",company_id:o?.company_id??null,assigned_to_id:c.value})},{immediate:!0});function x(){const o={...e.value,assigned_to_id:c.value};w("submit",o)}return(o,l)=>(B(),C("div",F,[r("div",M,[t(O,{flat:"",bordered:"",class:"tw-rounded-2xl"},{default:i(()=>[t(y,{class:"tw-text-lg tw-font-semibold"},{default:i(()=>[E(j(f.value?"Editar tarefa":"Cadastrar tarefa"),1)]),_:1}),t(y,null,{default:i(()=>[t(k,{onSubmit:D(x,["prevent"]),class:"tw-space-y-4"},{default:i(()=>[t(u,{modelValue:e.value.title,"onUpdate:modelValue":l[0]||(l[0]=a=>e.value.title=a),label:"Título *",outlined:"",dense:"","lazy-rules":"",rules:[a=>!!a||"Informe o título"]},null,8,["modelValue","rules"]),r("div",P,[t(n,{modelValue:e.value.status,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.status=a),options:b.value,"emit-value":"","map-options":"",label:"Status",outlined:"",dense:""},null,8,["modelValue","options"]),t(n,{modelValue:e.value.priority,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.priority=a),options:V.value,"emit-value":"","map-options":"",label:"Prioridade",outlined:"",dense:""},null,8,["modelValue","options"]),t(u,{modelValue:e.value.due_date,"onUpdate:modelValue":l[3]||(l[3]=a=>e.value.due_date=a),type:"date",label:"Data de entrega",outlined:"",dense:""},null,8,["modelValue"])]),t(n,{modelValue:e.value.company_id,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.company_id=a),options:g.value,"option-value":"id","option-label":"name","emit-value":"","map-options":"",label:"Empresa (opcional)",outlined:"",dense:"",clearable:""},null,8,["modelValue","options"]),t(u,{modelValue:e.value.description,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.description=a),type:"textarea",label:"Descrição",outlined:"",dense:"",autogrow:""},null,8,["modelValue"]),t(T,{"task-id":p.task?.id},null,8,["task-id"]),r("div",$,[t(N(I),{href:o.route("panel.tasks.index"),as:"button",type:"button"},{default:i(()=>[t(v,{flat:"",color:"primary",label:"Voltar"})]),_:1},8,["href"]),t(v,{type:"submit",color:"positive",unelevated:"",label:f.value?"Salvar alterações":"Cadastrar"},null,8,["label"])])]),_:1})]),_:1})]),_:1})])]))}};export{R as default};
