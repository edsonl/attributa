import{C as k,A as x,B as v,k as b,r as N}from"./vendor-quasar-CLzIisyG.js";import{r as o,w as R,e as V,G as Q,H as c,E as n,u as D,P as S,D as r,Q as _,C as w,M as T,N as U,I as q,V as y}from"./vendor-D8nj3W7R.js";const E={class:"row q-mb-md items-center"},F={class:"col-12 col-md-4"},A={__name:"Pageviews",setup(I){const p=o([]),d=o(!1),C=o(null),a=o({page:1,rowsPerPage:20,rowsNumber:0,sortBy:"created_at",descending:!0}),i=o(null),g=o([]),h=[{name:"created_at",label:"Data",field:"created_at",sortable:!0,align:"left"},{name:"campaign_name",label:"Campanha",field:"campaign_name",sortable:!0,align:"left"},{name:"campaign_code",label:"C처d/Campanha",field:"campaign_code",sortable:!0,align:"left"},{name:"url",label:"URL",field:"url",sortable:!0,align:"left"},{name:"ip",label:"IP",field:"ip",sortable:!0,align:"left"},{name:"conversion",label:"Convers찾o",field:"conversion",sortable:!0,align:"left"}];function B(t){return t?new Date(t).toLocaleString("pt-BR",{dateStyle:"short",timeStyle:"medium"}):"-"}function P(){y.get(route("panel.atividade.campaigns")).then(t=>{g.value=t.data})}function u(t){d.value=!0;const{page:l,rowsPerPage:e,sortBy:m,descending:f}=t.pagination;y.get(route("panel.atividade.pageviews.data"),{params:{page:l,per_page:e,sortBy:m,descending:f,campaign_code:i.value}}).then(s=>{p.value=s.data.data,a.value={...a.value,page:s.data.current_page,rowsPerPage:s.data.per_page,rowsNumber:s.data.total,sortBy:m,descending:f}}).finally(()=>{d.value=!1})}return R(i,()=>{a.value.page=1,u({pagination:a.value})}),V(()=>{P(),u({pagination:a.value})}),(t,l)=>(c(),Q(q,null,[n(D(S),{title:"Relat처rio de atividade"}),n(N,{flat:"",bordered:"",class:"tw-rounded-2xl tw-p-4"},{default:r(()=>[_("div",E,[_("div",F,[n(k,{ref_key:"tableRef",ref:C,modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),options:g.value,"option-label":"name","option-value":"code","emit-value":"","map-options":"",clearable:"",label:"Filtrar por campanha"},null,8,["modelValue","options"])])]),n(x,{rows:p.value,columns:h,"row-key":"id",loading:d.value,pagination:a.value,"onUpdate:pagination":l[1]||(l[1]=e=>a.value=e),"binary-state-sort":!0,onRequest:u},{"body-cell-created_at":r(e=>[n(v,{props:e},{default:r(()=>[T(U(B(e.value)),1)]),_:2},1032,["props"])]),"body-cell-conversion":r(e=>[n(v,{props:e},{default:r(()=>[e.value==="1"?(c(),w(b,{key:0,color:"green",label:"Convertido"})):(c(),w(b,{key:1,color:"grey-4","text-color":"dark",label:"N찾o convertido"}))]),_:2},1032,["props"])]),_:1},8,["rows","loading","pagination"])]),_:1})],64))}};export{A as default};
