import{u as de,r as ue,s as B,h as g,C as ce,n as b,k as A,v as ve}from"./vendor-quasar-D0sfcEux.js";import{_ as me}from"../app-PRapPME2.js";import{f as o,A as c,F as r,B as n,C as v,J as m,O as t,L as s,K as k,E as _,G as P,H as V,M as _e}from"./vendor-D6jaF0sv.js";const fe={class:"detail-section first-row-section"},ge={class:"section-card"},pe={class:"section-card__body"},ye={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},we={class:"detail-value"},be={class:"detail-value"},ke={class:"value-with-copy value-with-copy--inline"},Ce={class:"detail-value"},he={class:"value-with-copy value-with-copy--inline"},Se={class:"truncated-preview"},Ne={class:"tw-mt-1"},Re={class:"detail-value"},Le={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},$e={class:"detail-value tw-flex tw-items-center tw-gap-2"},xe=["src","alt"],Pe={class:"detail-label"},Ve={class:"detail-value"},De={class:"detail-section first-row-section"},Ie={class:"section-card"},Oe={class:"section-card__body"},Te={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},Ue={class:"detail-value"},Ee={class:"detail-value"},Be={class:"detail-value"},Ae={class:"detail-value"},Ge={class:"detail-value"},ze={class:"detail-value"},Fe={class:"detail-value"},Me={class:"detail-value"},Qe={class:"detail-value"},qe={class:"detail-value"},We={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-4"},je={class:"detail-value"},He={class:"detail-value"},Je={class:"tw-mt-1"},Ke={class:"ip-category-description"},Ze={class:"detail-value"},Xe={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3 tw-mt-4"},Ye={class:"detail-label"},et={class:"detail-value"},tt={class:"detail-section xl:tw-col-span-2"},lt={class:"section-card"},st={class:"section-card__body section-body--compact"},it={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3"},at={class:"detail-value"},ot={class:"detail-value"},rt={class:"detail-value"},nt={class:"value-with-copy"},dt={class:"detail-value tw-break-all"},ut={class:"lg:tw-col-span-2"},ct={class:"value-with-copy"},vt={class:"detail-value tw-break-all"},mt={class:"lg:tw-col-span-2"},_t={class:"detail-value tw-break-all"},ft={class:"lg:tw-col-span-4"},gt={key:0,class:"url-params-inline"},pt={class:"url-param-key"},yt={class:"value-with-copy value-with-copy--inline"},wt={class:"truncated-preview"},bt={key:1,class:"traffic-empty"},G=20,kt={__name:"ConversionPageviewDetailModal",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(S,{emit:z}){const F=[{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],M=[{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],f=S,Q=z,D=de(),N=o({get:()=>f.modelValue,set:l=>Q("update:modelValue",l)}),a=o(()=>f.payload?.pageview??{}),R=o(()=>f.payload?.url??{full:null,origin:null,path:null,query_params:{}}),C=o(()=>f.payload?.geo??{}),p=o(()=>f.payload?.network??{}),q=o(()=>a.value?.campaign?.name??"-"),W=o(()=>p.value?.flags??{}),L=o(()=>p.value?.ip_category??null),j=o(()=>L.value?.color_hex??"#475569"),H=o(()=>L.value?.name??"-"),J=o(()=>L.value?.description??"Sem descrição."),K=o(()=>a.value?.traffic_source_category??null),I=o(()=>K.value?.name??"Não classificado"),Z=o(()=>ne(a.value?.traffic_source_reason)),O=o(()=>{const l=C.value?.country_code;return l?`${f.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null}),X=o(()=>U(R.value?.full||"")),$=o(()=>a.value?.landing_url??null),Y=o(()=>U($.value||"")),h=o(()=>a.value?.referrer??null),ee=o(()=>ae(h.value)),x=o(()=>re()),T=o(()=>{const l=R.value?.query_params??{};return Object.entries(l)}),te=o(()=>T.value.length>0),le=o(()=>{const l=a.value?.device_category?.name,e=a.value?.device_type;return l||e||"-"}),se=o(()=>{const l=a.value?.browser?.name,e=a.value?.browser_name,i=a.value?.browser_version;return d(e)&&d(i)?`${e} ${i}`:d(e)?e:d(l)?l:"-"}),ie=o(()=>{const l=a.value?.os_name,e=a.value?.os_version;return d(l)&&d(e)?`${l} ${e}`:d(l)?l:"-"});function U(l){if(!l)return"-";try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local",i=new URL(l,e);return`${i.origin}${i.pathname}`}catch{return l.split("?")[0]??l}}function ae(l){if(!l)return null;try{const e=typeof window<"u"?window.location.origin:"https://placeholder.local";return new URL(l,e).host||null}catch{return null}}function d(l){return l!=null&&String(l).trim()!==""}function oe(l){return l==null?"-":l?"Sim":"Não"}function u(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}function E(l){const e=u(l);return!d(e)||e==="-"?"-":e.length<=G?e:e.slice(0,G)}function re(){const l=a.value?.gclid;if(d(l))return String(l);const e=R.value?.query_params??{},i=Object.entries(e).find(([w])=>String(w).toLowerCase()==="gclid");return i?u(i[1]):""}function ne(l){const e=String(l||"").trim();return e?e.startsWith("click_id:")?`Clique identificado por ${e.slice(9)}`:e.startsWith("utm_medium:")?`Classificado por utm_medium=${e.slice(11)}`:e.startsWith("referrer_search:")?`Referência de buscador (${e.slice(16)})`:e.startsWith("referrer_social:")?`Referência de rede social (${e.slice(16)})`:e.startsWith("referrer:")?`Referência externa (${e.slice(9)})`:e==="internal_referrer"?"Navegação interna no mesmo domínio":e.startsWith("utm_source_only:")?`Somente utm_source informado (${e.slice(16)})`:e==="no_referrer_no_utm_no_click_id"?"Sem referrer, UTM ou click-id (direto)":e:"-"}async function y(l){const e=u(l);try{await navigator.clipboard.writeText(e),D.notify({type:"positive",message:"Valor copiado."})}catch{D.notify({type:"negative",message:"Nao foi possivel copiar."})}}return(l,e)=>(r(),c(ve,{modelValue:N.value,"onUpdate:modelValue":e[5]||(e[5]=i=>N.value=i),"transition-show":"scale","transition-hide":"scale"},{default:n(()=>[v(ue,{class:"pageview-detail-card"},{default:n(()=>[v(B,{class:"tw-flex tw-justify-end"},{default:n(()=>[v(g,{icon:"close",flat:"",round:"",dense:"",onClick:e[0]||(e[0]=i=>N.value=!1)})]),_:1}),S.loading?(r(),c(ce,{key:0,indeterminate:"",color:"primary"})):m("",!0),S.loading?m("",!0):(r(),c(B,{key:1,class:"tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},{default:n(()=>[t("section",fe,[t("div",ge,[e[17]||(e[17]=t("div",{class:"section-card__header"},"VISITA",-1)),t("div",pe,[t("div",ye,[t("div",null,[e[6]||(e[6]=t("div",{class:"detail-label"},"Data/Horário",-1)),t("div",we,s(a.value.created_at_formatted),1)]),t("div",null,[e[7]||(e[7]=t("div",{class:"detail-label"},"Campanha",-1)),t("div",be,s(q.value),1)]),t("div",null,[e[9]||(e[9]=t("div",{class:"detail-label"},"IP",-1)),t("div",ke,[t("div",Ce,s(a.value.ip||"-"),1),d(a.value.ip)?(r(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[1]||(e[1]=i=>y(a.value.ip))},{default:n(()=>[v(b,null,{default:n(()=>[...e[8]||(e[8]=[k("Copiar IP",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",null,[e[11]||(e[11]=t("div",{class:"detail-label"},"GCLID",-1)),t("div",he,[t("div",Se,s(E(x.value)),1),d(x.value)?(r(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[2]||(e[2]=i=>y(x.value))},{default:n(()=>[v(b,null,{default:n(()=>[...e[10]||(e[10]=[k("Copiar GCLID",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",null,[e[12]||(e[12]=t("div",{class:"detail-label"},"Conversão",-1)),t("div",Ne,[a.value.conversion?(r(),c(A,{key:0,color:"green",label:"Convertido"})):(r(),c(A,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])]),t("div",null,[e[13]||(e[13]=t("div",{class:"detail-label"},"Canal",-1)),t("div",Re,s(I.value),1)])]),e[15]||(e[15]=t("div",{class:"subsection-separator"},null,-1)),e[16]||(e[16]=t("div",{class:"subsection-title"},"GEOLOCALIZAÇÃO",-1)),t("div",Le,[t("div",null,[e[14]||(e[14]=t("div",{class:"detail-label"},"País",-1)),t("div",$e,[O.value?(r(),_("img",{key:0,src:O.value,alt:C.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,xe)):m("",!0),t("span",null,s(C.value.country_name??"-"),1)])]),(r(),_(P,null,V(F,i=>t("div",{key:i.key},[t("div",Pe,s(i.label),1),t("div",Ve,s(C.value[i.key]??"-"),1)])),64))])])])]),t("section",De,[t("div",Ie,[e[34]||(e[34]=t("div",{class:"section-card__header"},"DISPOSITIVO, NAVEGADOR & REDE",-1)),t("div",Oe,[t("div",Te,[t("div",null,[e[18]||(e[18]=t("div",{class:"detail-label"},"Categoria",-1)),t("div",Ue,s(le.value),1)]),t("div",null,[e[19]||(e[19]=t("div",{class:"detail-label"},"Marca",-1)),t("div",Ee,s(u(a.value.device_brand)),1)]),t("div",null,[e[20]||(e[20]=t("div",{class:"detail-label"},"Modelo",-1)),t("div",Be,s(u(a.value.device_model)),1)]),t("div",null,[e[21]||(e[21]=t("div",{class:"detail-label"},"Sistema Operacional",-1)),t("div",Ae,s(ie.value),1)]),t("div",null,[e[22]||(e[22]=t("div",{class:"detail-label"},"Navegador",-1)),t("div",Ge,s(se.value),1)]),t("div",null,[e[23]||(e[23]=t("div",{class:"detail-label"},"Idioma",-1)),t("div",ze,s(u(a.value.language)),1)]),t("div",null,[e[24]||(e[24]=t("div",{class:"detail-label"},"Plataforma",-1)),t("div",Fe,s(u(a.value.platform)),1)]),t("div",null,[e[25]||(e[25]=t("div",{class:"detail-label"},"Tela",-1)),t("div",Me,s(u(a.value.screen_width))+" x "+s(u(a.value.screen_height)),1)]),t("div",null,[e[26]||(e[26]=t("div",{class:"detail-label"},"Viewport",-1)),t("div",Qe,s(u(a.value.viewport_width))+" x "+s(u(a.value.viewport_height)),1)]),t("div",null,[e[27]||(e[27]=t("div",{class:"detail-label"},"DPR",-1)),t("div",qe,s(u(a.value.device_pixel_ratio)),1)])]),e[32]||(e[32]=t("div",{class:"subsection-separator"},null,-1)),e[33]||(e[33]=t("div",{class:"subsection-title"},"INFORMAÇÕES DA REDE",-1)),t("div",We,[t("div",null,[e[28]||(e[28]=t("div",{class:"detail-label"},"ISP",-1)),t("div",je,s(p.value.isp||"-"),1)]),t("div",null,[e[29]||(e[29]=t("div",{class:"detail-label"},"Organização",-1)),t("div",He,s(p.value.organization||"-"),1)]),t("div",null,[e[30]||(e[30]=t("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),t("div",Je,[t("div",{class:"ip-category-label",style:_e({color:j.value})},s(H.value),5),t("div",Ke,s(J.value),1)])]),t("div",null,[e[31]||(e[31]=t("div",{class:"detail-label"},"Fraud Score",-1)),t("div",Ze,s(p.value.fraud_score??"-"),1)])]),t("div",Xe,[(r(),_(P,null,V(M,i=>t("div",{key:i.key},[t("div",Ye,s(i.label),1),t("div",et,s(oe(W.value[i.key])),1)])),64))])])])]),t("section",tt,[t("div",lt,[e[44]||(e[44]=t("div",{class:"section-card__header"},"ORIGEM DO TRÁFEGO",-1)),t("div",st,[t("div",it,[t("div",null,[e[35]||(e[35]=t("div",{class:"detail-label"},"Canal",-1)),t("div",at,s(I.value),1)]),t("div",null,[e[36]||(e[36]=t("div",{class:"detail-label"},"Motivo da classificação",-1)),t("div",ot,s(Z.value),1)]),t("div",null,[e[37]||(e[37]=t("div",{class:"detail-label"},"Domínio de referrer",-1)),t("div",rt,s(ee.value||"-"),1)]),t("div",null,[e[39]||(e[39]=t("div",{class:"detail-label"},"Referrer completo",-1)),t("div",nt,[t("div",dt,s(h.value||"-"),1),d(h.value)?(r(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[3]||(e[3]=i=>y(h.value))},{default:n(()=>[v(b,null,{default:n(()=>[...e[38]||(e[38]=[k("Copiar referrer",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",ut,[e[41]||(e[41]=t("div",{class:"detail-label"},"Landing page (sem parâmetros)",-1)),t("div",ct,[t("div",vt,s(Y.value),1),d($.value)?(r(),c(g,{key:0,dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:e[4]||(e[4]=i=>y($.value))},{default:n(()=>[v(b,null,{default:n(()=>[...e[40]||(e[40]=[k("Copiar landing URL",-1)])]),_:1})]),_:1})):m("",!0)])]),t("div",mt,[e[42]||(e[42]=t("div",{class:"detail-label"},"Página atual (sem parâmetros)",-1)),t("div",_t,s(X.value),1)]),t("div",ft,[e[43]||(e[43]=t("div",{class:"detail-label"},"Parâmetros da URL",-1)),te.value?(r(),_("div",gt,[(r(!0),_(P,null,V(T.value,([i,w])=>(r(),_("div",{key:`query-${i}-${w}`,class:"url-param-chip"},[t("div",pt,s(i),1),t("div",yt,[t("div",wt,s(E(w)),1),v(g,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:Ct=>y(w)},{default:n(()=>[v(b,null,{default:n(()=>[k("Copiar "+s(i),1)]),_:2},1024)]),_:2},1032,["onClick"])])]))),128))])):(r(),_("div",bt,"-"))])])])])])]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}},Rt=me(kt,[["__scopeId","data-v-db1e0280"]]);export{Rt as default};
