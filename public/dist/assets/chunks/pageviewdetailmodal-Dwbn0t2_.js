import{u as Z,r as W,s as A,h as x,F as X,k as B,n as U,v as ee}from"./vendor-quasar-C1KtC9YM.js";import{_ as te}from"../app-Ben3eMxq.js";import{f as i,C as g,H as o,D as n,E as c,L as y,Q as e,G as d,N as s,O,M as E,I as P,J as L}from"./vendor-D8nj3W7R.js";const le={class:"detail-section"},ae={class:"section-card"},se={class:"section-card__body"},ie={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},oe={class:"detail-value"},de={class:"detail-value"},ne={class:"detail-value"},re={class:"tw-mt-1"},ce={class:"ip-category-description"},ue={class:"tw-mt-1"},ve={key:0},_e={class:"gclid-param-row"},ge={class:"gclid-preview"},pe={class:"detail-section"},me={class:"section-card"},ye={class:"section-card__body"},we={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-3 tw-gap-4"},fe={class:"detail-value tw-flex tw-items-center tw-gap-2"},be=["src","alt"],ke={class:"detail-label"},Ce={class:"detail-value"},he={class:"detail-section xl:tw-col-span-2"},xe={class:"section-card"},Pe={class:"section-card__body section-body--stack"},Le={class:"detail-value tw-break-all"},Ne={class:"tw-mt-2"},Se={key:0,class:"url-params-inline"},De={class:"url-param-key"},Ie={key:0,class:"gclid-param-row"},Ve={class:"gclid-preview"},Ge={key:1,class:"url-param-value"},Ae={key:1,class:"tw-text-sm tw-text-slate-500"},Be={class:"detail-section xl:tw-col-span-2"},Ue={class:"section-card"},Oe={class:"section-card__body"},Ee={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-4"},Qe={class:"detail-value"},$e={class:"detail-value"},Fe={class:"tw-mt-1"},Re={class:"ip-category-description"},Te={class:"detail-value"},ze={class:"detail-value"},je={class:"tw-grid md:tw-grid-cols-2 lg:tw-grid-cols-4 tw-gap-3 tw-mt-4"},qe={class:"detail-label"},Me={class:"detail-value"},He={__name:"PageviewDetailModal",props:{modelValue:{type:Boolean,required:!0},loading:{type:Boolean,default:!1},payload:{type:Object,default:()=>null},assetBaseUrl:{type:String,default:""}},emits:["update:modelValue"],setup(w,{emit:Q}){const $={name:"Não determinado",color_hex:"#FCE7F3",description:"Categoria ainda não determinada."},u=w,F=Q,N=Z(),f=i({get:()=>u.modelValue,set:l=>F("update:modelValue",l)}),v=i(()=>u.payload?.pageview??{}),b=i(()=>u.payload?.url??{full:null,origin:null,path:null,query_params:{}}),p=i(()=>u.payload?.geo??{}),r=i(()=>u.payload?.network??{}),S=i(()=>{const l=b.value?.query_params??{};return Object.entries(l)}),R=i(()=>S.value.length>0),T=i(()=>v.value?.campaign?.name??"-"),z=i(()=>r.value?.flags??{}),k=i(()=>v.value?.ip_category??$),C=i(()=>r.value?.ip_category??null),j=i(()=>C.value?.color_hex??"#475569"),q=i(()=>C.value?.name??"-"),M=i(()=>C.value?.description??"Sem descrição."),H=i(()=>J(b.value?.full||"")),h=i(()=>Y()),D=i(()=>{const l=p.value?.country_code;return l?`${u.assetBaseUrl}/assets/country-flags/${String(l).toLowerCase()}.svg`:null});function J(l){if(!l)return"-";try{const t=typeof window<"u"?window.location.origin:"https://placeholder.local",a=new URL(l,t);return`${a.origin}${a.pathname}`}catch{return l.split("?")[0]??l}}function K(l){return l==null?"-":l?"Sim":"Não"}function m(l){if(l==null)return"-";if(Array.isArray(l)||typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}function I(l){return l!=null&&String(l).trim()!==""}function V(l){return String(l||"").toLowerCase()==="gclid"}function Y(){const l=v.value?.gclid;if(I(l))return String(l);const t=b.value?.query_params??{},a=Object.entries(t).find(([_])=>V(_));return a?m(a[1]):""}async function G(l){const t=m(l);try{await navigator.clipboard.writeText(t),N.notify({type:"positive",message:"GCLID copiado."})}catch{N.notify({type:"negative",message:"Nao foi possivel copiar."})}}return(l,t)=>(o(),g(ee,{modelValue:f.value,"onUpdate:modelValue":t[2]||(t[2]=a=>f.value=a),"transition-show":"scale","transition-hide":"scale"},{default:n(()=>[c(W,{class:"pageview-detail-card"},{default:n(()=>[c(A,{class:"tw-flex tw-justify-end"},{default:n(()=>[c(x,{icon:"close",flat:"",round:"",dense:"",onClick:t[0]||(t[0]=a=>f.value=!1)})]),_:1}),w.loading?(o(),g(X,{key:0,indeterminate:"",color:"primary"})):y("",!0),w.loading?y("",!0):(o(),g(A,{key:1,class:"tw-grid tw-gap-6 tw-grid-cols-1 xl:tw-grid-cols-2"},{default:n(()=>[e("section",le,[e("div",ae,[t[10]||(t[10]=e("div",{class:"section-card__header"},"VISITA",-1)),e("div",se,[e("div",ie,[e("div",null,[t[3]||(t[3]=e("div",{class:"detail-label"},"Data/Horário",-1)),e("div",oe,s(v.value.created_at_formatted),1)]),e("div",null,[t[4]||(t[4]=e("div",{class:"detail-label"},"Campanha",-1)),e("div",de,s(T.value),1)]),e("div",null,[t[5]||(t[5]=e("div",{class:"detail-label"},"IP",-1)),e("div",ne,s(v.value.ip||"-"),1)]),e("div",null,[t[6]||(t[6]=e("div",{class:"detail-label"},"Categoria de IP",-1)),e("div",re,[e("div",{class:"ip-category-label",style:O({color:k.value.color_hex})},s(k.value.name),5),e("div",ce,s(k.value.description||"Sem descrição."),1)])]),e("div",null,[t[7]||(t[7]=e("div",{class:"detail-label"},"Conversão",-1)),e("div",ue,[v.value.conversion?(o(),g(B,{key:0,color:"green",label:"Convertido"})):(o(),g(B,{key:1,color:"grey-4","text-color":"dark",label:"Não convertido"}))])]),I(h.value)?(o(),d("div",ve,[t[9]||(t[9]=e("div",{class:"detail-label"},"GCLID",-1)),e("div",_e,[e("div",ge,s(h.value),1),c(x,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:t[1]||(t[1]=a=>G(h.value))},{default:n(()=>[c(U,null,{default:n(()=>[...t[8]||(t[8]=[E("Copiar GCLID",-1)])]),_:1})]),_:1})])])):y("",!0)])])])]),e("section",pe,[e("div",me,[t[12]||(t[12]=e("div",{class:"section-card__header"},"GEOLOCALIZAÇÃO",-1)),e("div",ye,[e("div",we,[e("div",null,[t[11]||(t[11]=e("div",{class:"detail-label"},"País",-1)),e("div",fe,[D.value?(o(),d("img",{key:0,src:D.value,alt:p.value.country_code,class:"tw-w-6 tw-h-4 tw-rounded-sm tw-object-cover tw-border tw-border-gray-200"},null,8,be)):y("",!0),e("span",null,s(p.value.country_name??"-"),1)])]),(o(),d(P,null,L([{label:"Código",key:"country_code"},{label:"Região",key:"region_name"},{label:"Cidade",key:"city"},{label:"Latitude",key:"latitude"},{label:"Longitude",key:"longitude"},{label:"Timezone",key:"timezone"}],a=>e("div",{key:a.key},[e("div",ke,s(a.label),1),e("div",Ce,s(p.value[a.key]??"-"),1)])),64))])])])]),e("section",he,[e("div",xe,[t[16]||(t[16]=e("div",{class:"section-card__header"},"ORIGEM DA URL",-1)),e("div",Pe,[e("div",null,[t[13]||(t[13]=e("div",{class:"detail-label"},"Página (sem parâmetros)",-1)),e("div",Le,s(H.value),1)]),e("div",null,[t[15]||(t[15]=e("div",{class:"detail-label"},"Parâmetros",-1)),e("div",Ne,[R.value?(o(),d("div",Se,[(o(!0),d(P,null,L(S.value,([a,_])=>(o(),d("div",{key:`${a}-${_}`,class:"url-param-chip"},[e("div",De,s(a),1),V(a)?(o(),d("div",Ie,[e("div",Ve,s(m(_)),1),c(x,{dense:"",flat:"",round:"",size:"sm",icon:"content_copy",onClick:Je=>G(_)},{default:n(()=>[c(U,null,{default:n(()=>[...t[14]||(t[14]=[E("Copiar GCLID",-1)])]),_:1})]),_:1},8,["onClick"])])):(o(),d("div",Ge,s(m(_)),1))]))),128))])):(o(),d("div",Ae,"Sem parâmetros na URL."))])])])])]),e("section",Be,[e("div",Ue,[t[22]||(t[22]=e("div",{class:"section-card__header"},"REDE & SEGURANÇA",-1)),e("div",Oe,[e("div",Ee,[e("div",null,[t[17]||(t[17]=e("div",{class:"detail-label"},"ISP",-1)),e("div",Qe,s(r.value.isp||"-"),1)]),e("div",null,[t[18]||(t[18]=e("div",{class:"detail-label"},"Organização",-1)),e("div",$e,s(r.value.organization||"-"),1)]),e("div",null,[t[19]||(t[19]=e("div",{class:"detail-label"},"Categoria IP (Lookup)",-1)),e("div",Fe,[e("div",{class:"ip-category-label",style:O({color:j.value})},s(q.value),5),e("div",Re,s(M.value),1)])]),e("div",null,[t[20]||(t[20]=e("div",{class:"detail-label"},"Fraud Score",-1)),e("div",Te,s(r.value.fraud_score??"-"),1)]),e("div",null,[t[21]||(t[21]=e("div",{class:"detail-label"},"Última verificação",-1)),e("div",ze,s(r.value.last_checked_formatted??r.value.last_checked??"-"),1)])]),e("div",je,[(o(),d(P,null,L([{key:"is_proxy",label:"Proxy"},{key:"is_vpn",label:"VPN"},{key:"is_tor",label:"Tor"},{key:"is_datacenter",label:"Datacenter"},{key:"is_bot",label:"Bot"}],a=>e("div",{key:a.key},[e("div",qe,s(a.label),1),e("div",Me,s(K(z.value[a.key])),1)])),64))])])])])]),_:1}))]),_:1})]),_:1},8,["modelValue"]))}},We=te(He,[["__scopeId","data-v-84e9a9bb"]]);export{We as default};
