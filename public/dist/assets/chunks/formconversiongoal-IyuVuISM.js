import{u as _,x as z,E as C,F as w,h as u}from"./vendor-quasar-DYxT2uMy.js";import{f as V,r as h,Y as G,E as y,F as S,C as r,O as F,u as n,Q as B,Z as Q}from"./vendor-D6jaF0sv.js";const k={class:"tw-flex tw-justify-end tw-gap-2"},E={__name:"FormConversionGoal",props:{conversionGoal:{type:Object,default:null},timezones:{type:Array,default:()=>[]}},setup(d){const s=d,c=V(()=>!!s.conversionGoal),m=_(),l=h(s.timezones),e=G({goal_code:s.conversionGoal?.goal_code??"",timezone_id:s.conversionGoal?.timezone_id??null,active:s.conversionGoal?.active??!0});function p(t){const o=String(t??""),a=/\s/.test(o),i=/[^\u0000-\u007F]/.test(o),b=/[^A-Za-z0-9_-]/.test(o);return a||i||b}function f(){return new Promise(t=>{m.dialog({title:"Atenção",message:"Não é recomendado usar espaços, acentos ou caracteres especiais no código da meta de conversão. Deseja continuar mesmo assim?",ok:{label:"Continuar",color:"warning",unelevated:!0},cancel:{label:"Cancelar",flat:!0},persistent:!0}).onOk(()=>t(!0)).onCancel(()=>t(!1)).onDismiss(()=>t(!1))})}async function v(){if(e.goal_code=String(e.goal_code??"").trim(),!(p(e.goal_code)&&!await f())){if(c.value){e.put(route("panel.conversion-goals.update",s.conversionGoal.hashid??s.conversionGoal.id));return}e.post(route("panel.conversion-goals.store"))}}function g(t,o){o(()=>{const a=String(t??"").trim().toLowerCase();if(a===""){l.value=s.timezones;return}l.value=s.timezones.filter(i=>String(i?.label??"").toLowerCase().includes(a))})}return(t,o)=>(S(),y("form",{onSubmit:Q(v,["prevent"]),class:"tw-space-y-2 tw-pt-4"},[r(z,{modelValue:n(e).goal_code,"onUpdate:modelValue":o[0]||(o[0]=a=>n(e).goal_code=a),label:"Codigo da meta de conversao",outlined:"",dense:"",error:!!n(e).errors.goal_code,"error-message":n(e).errors.goal_code},null,8,["modelValue","error","error-message"]),r(C,{modelValue:n(e).timezone_id,"onUpdate:modelValue":o[1]||(o[1]=a=>n(e).timezone_id=a),options:l.value,"option-value":"id","option-label":"label","emit-value":"","map-options":"","use-input":"","input-debounce":"0",onFilter:g,label:"Timezone",outlined:"",dense:"",clearable:!1,error:!!n(e).errors.timezone_id,"error-message":n(e).errors.timezone_id,hint:"Deve corresponder ao fuso horario configurado na sua conta do Google Ads."},null,8,["modelValue","options","error","error-message"]),r(w,{modelValue:n(e).active,"onUpdate:modelValue":o[2]||(o[2]=a=>n(e).active=a),label:"Meta ativa","true-value":!0,"false-value":!1},null,8,["modelValue"]),F("div",k,[r(u,{flat:"",label:"Cancelar",onClick:o[3]||(o[3]=a=>n(B).visit(t.route("panel.conversion-goals.index")))}),r(u,{color:"primary",label:"Salvar",type:"submit"})])],32))}};export{E as default};
